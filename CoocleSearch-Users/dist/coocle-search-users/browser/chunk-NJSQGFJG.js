import{a as O,b as L}from"./chunk-B7YKHN6Y.js";import{k as G,l as M,m as J}from"./chunk-WTBYEKWR.js";import{A as p,E as m,G as u,I as o,J as n,K as a,N as k,O as h,P as b,R as r,S as v,T as d,V as x,ea as E,fa as w,ga as f,ha as z,k as P,ka as A,l as S,la as $,ma as T,n as D,o as _,p as C,pa as c,s as B,t as I,x as R,y as V,z as l}from"./chunk-YV6O6NLY.js";var F=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=_({type:i,selectors:[["app-business"]],standalone:!0,features:[x],decls:1,vars:0,template:function(e,s){e&1&&a(0,"router-outlet")},dependencies:[c,$,G,f]})};function Z(i,t){if(i&1){let e=k();o(0,"tr",9)(1,"td",10),r(2),n(),o(3,"td"),r(4),n(),o(5,"td"),r(6),n(),o(7,"td"),r(8),n(),o(9,"td"),r(10),n(),o(11,"td"),r(12),n(),o(13,"td")(14,"button",11),h("click",function(){let g=B(e).$implicit,U=b(2);return I(U.Readsinglebusiness(g.bu_uid))}),a(15,"i",12),n()()()}if(i&2){let e=t.$implicit,s=t.index;l(2),v(s+1),l(2),d(" ",e==null?null:e.t_uid," "),l(2),d(" ",e==null?null:e.bu_categorie," "),l(2),d(" ",e==null?null:e.bu_type," "),l(2),d(" ",e==null?null:e.bu_name," "),l(2),d(" ",e==null?null:e.bu_city," ")}}function ee(i,t){if(i&1&&(o(0,"table",5)(1,"thead",6)(2,"tr")(3,"th",7)(4,"b"),r(5,"#"),n()(),o(6,"td")(7,"b"),r(8,"User"),n()(),o(9,"td")(10,"b"),r(11,"Categorie"),n()(),o(12,"td")(13,"b"),r(14,"Type"),n()(),o(15,"td")(16,"b"),r(17,"Name"),n()(),o(18,"td")(19,"b"),r(20,"City"),n()(),o(21,"td")(22,"b"),r(23,"Edit"),n()()()(),o(24,"tbody"),m(25,Z,16,6,"tr",8),n()()),i&2){let e=b();l(25),u("ngForOf",e.dataBusiness)}}var H=class i{constructor(t,e){this.router=t;this.http=e}business=[];dataCategorie=[];deleteResult=[];dataBusiness=[];allBusiness=[];allCategories=[];tellerUid;ngOnInit(){}Readsinglebusiness(t){this.router.navigate(["/teller/business/readsingle-business",t])}static \u0275fac=function(e){return new(e||i)(p(T),p(O))};static \u0275cmp=_({type:i,selectors:[["app-readall-business"]],standalone:!0,features:[x],decls:7,vars:1,consts:[[1,"container","p-0",2,"position","relative","top","30px","bottom","30px","width","100%"],[1,"",2,"color","black"],[1,"row"],[1,"col-12","-responsive"],["class","table report_gcc",4,"ngIf"],[1,"table","report_gcc"],[2,"color","black"],["scope","col"],["class","op-06",4,"ngFor","ngForOf"],[1,"op-06"],[1,"ps-3"],["type","button",1,"btn",2,"width","50%","margin-left","-5px",3,"click"],[1,"fa-solid","fa-eye",2,"color","#e9af00"]],template:function(e,s){e&1&&(o(0,"div",0)(1,"h3",1),r(2,"All Business"),n(),a(3,"br"),o(4,"div",2)(5,"div",3),m(6,ee,26,1,"table",4),n()()()),e&2&&(l(6),u("ngIf",s.dataBusiness&&s.dataBusiness.length>0))},dependencies:[c,f,E,w,M],styles:["tr[_ngcontent-%COMP%]{color:#000!important}"]})};var N=class i{constructor(t){this.http=t}api_url=J.apiUrl;SaveHistorique(t){return this.http.post(this.api_url+"/api/historiques/save_historique",t)}ReadAllHistoriqueByUser(t){return this.http.post(this.api_url+"/api/historiques/read_all_historique_by_user",t)}DeleteHistoriques(t){return this.http.post(this.api_url+"/api/historiques/delete_historiques",t)}static \u0275fac=function(e){return new(e||i)(D(z))};static \u0275prov=P({token:i,factory:i.\u0275fac,providedIn:"root"})};function ie(i,t){if(i&1&&(o(0,"div",21)(1,"span",22),a(2,"i",23),r(3),n()()),i&2){let e=b();l(3),d(" ",e.business==null?null:e.business.bu_category," ")}}function ne(i,t){i&1&&(o(0,"div",24),a(1,"div",25),n())}function se(i,t){if(i&1&&(o(0,"a",26),a(1,"i",27),r(2," Site Web "),n()),i&2){let e=b();u("href",e.business==null?null:e.business.bu_website,R)}}function oe(i,t){if(i&1&&(o(0,"div",32),a(1,"img",33),n()),i&2){let e=t.$implicit;l(),u("src",e,R)}}function re(i,t){if(i&1&&(o(0,"div",28)(1,"h4",29),r(2,"Galerie"),n(),o(3,"div",30),m(4,oe,2,1,"div",31),n()()),i&2){let e=b();l(4),u("ngForOf",e.business.bu_gallery)}}function le(i,t){if(i&1){let e=k();o(0,"button",34),h("click",function(){B(e);let g=b();return I(g.scrollToTop())}),r(1,` Go back up \u2191
`),n()}}var j=class i{constructor(t,e,s,g){this.route=t;this.http=e;this.router=s;this.api=g}business;histo_infos;backToTopBtnVisible=!1;userEmail;businessUid;loading=!1;textSearch;user_infos;user_id;ngOnInit(){this.router.params.subscribe(s=>{this.businessUid=s.bu_uid,console.log(this.businessUid)}),this.readSingleBusiness();let t=sessionStorage.getItem("textSearch");this.textSearch=t,console.log(this.textSearch),t&&(this.textSearch=JSON.parse(t),console.log("textSearch:",this.textSearch));let e=sessionStorage.getItem("user_infos");this.user_infos=e,console.log(this.user_infos),e&&(this.user_infos=JSON.parse(e),this.user_id=this.user_infos.u_uid,console.log("user_id:",this.user_id))}backStep(){sessionStorage.removeItem("single_business"),history.back()}readSingleBusiness(){this.loading=!0;let t={bu_uid:this.businessUid};this.http.ReadSingleBusiness(t).subscribe({next:e=>{console.log(this.business),console.log("user_id: ",this.user_id),this.saveHistorique(),e?.status==="success"?(setTimeout(()=>{this.loading=!1,this.business=e?.business},2e3),e.business&&sessionStorage.setItem("single_business",JSON.stringify(e.business))):this.business=[]},error:e=>{console.error("Failed to load products:",e)}})}saveHistorique(){this.loading=!0;let t={bu_uid:this.businessUid,u_uid:this.user_id,textSearch:this.textSearch};this.api.SaveHistorique(t).subscribe({next:e=>{e?.status==="success"?setTimeout(()=>{this.loading=!1,this.histo_infos=e?.histo_infos},2e3):this.business=[]},error:e=>{console.error("Failed to load products:",e)}})}onScroll(){let t=document.documentElement.scrollTop||document.body.scrollTop;this.backToTopBtnVisible=t>200}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}static \u0275fac=function(e){return new(e||i)(p(T),p(O),p(A),p(N))};static \u0275cmp=_({type:i,selectors:[["app-readsingle-business"]],hostBindings:function(e,s){e&1&&h("scroll",function(U){return s.onScroll(U)},!1,V)},standalone:!0,features:[x],decls:32,vars:12,consts:[[1,"container","mt-5","mb-5"],[1,"card","shadow-lg","border-0","rounded-4","overflow-hidden"],[1,"row","g-0"],[1,"col-md-5"],["alt","PUB",1,"img-fluid","h-100","w-100","object-fit-cover",3,"src"],[1,"col-md-7"],[1,"card-body","p-4"],[1,"card-title","fw-bold","mb-3","text-black"],[1,"text-muted"],[1,"bi","bi-geo-alt-fill","text-secondary","me-2"],[1,"bi","bi-house-fill","text-secondary","me-2"],[1,"card-text","m-0"],[1,"bi","bi-telephone-fill","text-secondary"],[1,"mt-4"],["class","mt-3",4,"ngIf"],["class","spinner-overlay",4,"ngIf"],[1,"btn","btn-warning","rounded-pill","me-3","back-btp-style",3,"click"],[1,"bi","bi-arrow-left"],["class","btn btn-outline-primary rounded-pill","target","_blank",3,"href",4,"ngIf"],["class","mt-5",4,"ngIf"],["id","backToTopBtn","style","background: none; border: none; color: black; font-size: 1.2rem; cursor: pointer;",3,"click",4,"ngIf"],[1,"mt-3"],[1,"badge","bg-info","text-dark","px-3","py-2","rounded-pill"],[1,"bi","bi-tag"],[1,"spinner-overlay"],[1,"spinner"],["target","_blank",1,"btn","btn-outline-primary","rounded-pill",3,"href"],[1,"bi","bi-globe"],[1,"mt-5"],[1,"mb-4","fw-semibold","text-center"],[1,"row","g-3"],["class","col-md-4",4,"ngFor","ngForOf"],[1,"col-md-4"],["alt","Galerie",1,"img-fluid","rounded","shadow-sm","object-fit-cover",2,"height","250px","width","100%",3,"src"],["id","backToTopBtn",2,"background","none","border","none","color","black","font-size","1.2rem","cursor","pointer",3,"click"]],template:function(e,s){e&1&&(a(0,"app-header"),o(1,"section",0)(2,"div",1)(3,"div",2)(4,"div",3),a(5,"img",4),n(),o(6,"div",5)(7,"div",6)(8,"h2",7),r(9),n(),o(10,"p",8),a(11,"i",9),r(12),n(),o(13,"p",8),a(14,"i",10),r(15),n(),o(16,"p",11),a(17,"i",12),r(18),n(),o(19,"p",13),r(20),n(),o(21,"p"),r(22),n(),m(23,ie,4,1,"div",14)(24,ne,2,0,"div",15),o(25,"div",13)(26,"a",16),h("click",function(){return s.backStep()}),a(27,"i",17),r(28," Retour "),n(),m(29,se,3,1,"a",18),n()()()()(),m(30,re,5,1,"div",19),n(),m(31,le,2,0,"button",20)),e&2&&(l(5),u("src","assets/img/default.jpg",R),l(4),v(s.business==null?null:s.business.bu_name),l(3),d("",s.business==null?null:s.business.bu_city," "),l(3),d("",s.business==null?null:s.business.bu_address," "),l(3),d(" ",s.business.phone,""),l(2),v(s.business==null?null:s.business.bu_categorie),l(2),v(s.business==null?null:s.business.bu_description),l(),u("ngIf",s.business==null?null:s.business.bu_category),l(),u("ngIf",s.loading),l(5),u("ngIf",s.business==null?null:s.business.bu_website),l(),u("ngIf",(s.business==null||s.business.bu_gallery==null?null:s.business.bu_gallery.length)>0),l(),u("ngIf",s.backToTopBtnVisible))},dependencies:[M,f,E,w,c,L],styles:[".spinner-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#fff9;display:flex;justify-content:center;align-items:center;z-index:9999}.spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:5px solid #ccc;border-top-color:#0f2027;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.back-btp-style[_ngcontent-%COMP%]{background:linear-gradient(to right,#ffc107,#6d5203);color:#fff;border:none;border-radius:25px;font-weight:700;cursor:pointer;transition:background .3s ease;box-shadow:0 5px 15px #0003}.back-btp-style[_ngcontent-%COMP%]:hover{background:linear-gradient(to right,#0f2027,#203a43,#2c5364)}"]})};var ae=[{path:"",component:F,children:[{path:"",redirectTo:"create-business",pathMatch:"full"},{path:"readall-business",component:H},{path:"readsingle-business/:bu_uid",component:j}]}],q=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=C({type:i});static \u0275inj=S({imports:[c.forChild(ae),c]})};var Q=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=C({type:i});static \u0275inj=S({imports:[f,q]})};export{Q as BusinessModule};
