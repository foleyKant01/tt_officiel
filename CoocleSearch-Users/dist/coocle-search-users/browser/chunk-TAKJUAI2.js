import{a as O,b as W}from"./chunk-AI5BKHAS.js";import{k as J,l as M,m as L}from"./chunk-7R3T6A2X.js";import{A as p,E as m,G as u,I as o,J as s,K as a,N as k,O as h,P as b,R as z,T as r,U as y,V as d,X as v,ga as w,ha as E,ia as f,ja as A,k as P,l as S,ma as $,n as D,na as G,o as _,oa as T,p as C,ra as c,s as I,t as B,x as R,y as V,z as l}from"./chunk-NDQ5UUJF.js";var F=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=_({type:i,selectors:[["app-business"]],standalone:!0,features:[v],decls:1,vars:0,template:function(e,n){e&1&&a(0,"router-outlet")},dependencies:[c,G,J,f]})};function ee(i,t){if(i&1){let e=k();o(0,"tr",9)(1,"td",10),r(2),s(),o(3,"td"),r(4),s(),o(5,"td"),r(6),s(),o(7,"td"),r(8),s(),o(9,"td"),r(10),s(),o(11,"td"),r(12),s(),o(13,"td")(14,"button",11),h("click",function(){let g=I(e).$implicit,U=b(2);return B(U.Readsinglebusiness(g.bu_uid))}),a(15,"i",12),s()()()}if(i&2){let e=t.$implicit,n=t.index;l(2),y(n+1),l(2),d(" ",e==null?null:e.t_uid," "),l(2),d(" ",e==null?null:e.bu_categorie," "),l(2),d(" ",e==null?null:e.bu_type," "),l(2),d(" ",e==null?null:e.bu_name," "),l(2),d(" ",e==null?null:e.bu_city," ")}}function te(i,t){if(i&1&&(o(0,"table",5)(1,"thead",6)(2,"tr")(3,"th",7)(4,"b"),r(5,"#"),s()(),o(6,"td")(7,"b"),r(8,"User"),s()(),o(9,"td")(10,"b"),r(11,"Categorie"),s()(),o(12,"td")(13,"b"),r(14,"Type"),s()(),o(15,"td")(16,"b"),r(17,"Name"),s()(),o(18,"td")(19,"b"),r(20,"City"),s()(),o(21,"td")(22,"b"),r(23,"Edit"),s()()()(),o(24,"tbody"),m(25,ee,16,6,"tr",8),s()()),i&2){let e=b();l(25),u("ngForOf",e.dataBusiness)}}var H=class i{constructor(t,e){this.router=t;this.http=e}business=[];dataCategorie=[];deleteResult=[];dataBusiness=[];allBusiness=[];allCategories=[];tellerUid;ngOnInit(){}Readsinglebusiness(t){this.router.navigate(["/teller/business/readsingle-business",t])}static \u0275fac=function(e){return new(e||i)(p(T),p(O))};static \u0275cmp=_({type:i,selectors:[["app-readall-business"]],standalone:!0,features:[v],decls:7,vars:1,consts:[[1,"container","p-0",2,"position","relative","top","30px","bottom","30px","width","100%"],[1,"",2,"color","black"],[1,"row"],[1,"col-12","-responsive"],["class","table report_gcc",4,"ngIf"],[1,"table","report_gcc"],[2,"color","black"],["scope","col"],["class","op-06",4,"ngFor","ngForOf"],[1,"op-06"],[1,"ps-3"],["type","button",1,"btn",2,"width","50%","margin-left","-5px",3,"click"],[1,"fa-solid","fa-eye",2,"color","#e9af00"]],template:function(e,n){e&1&&(o(0,"div",0)(1,"h3",1),r(2,"All Business"),s(),a(3,"br"),o(4,"div",2)(5,"div",3),m(6,te,26,1,"table",4),s()()()),e&2&&(l(6),u("ngIf",n.dataBusiness&&n.dataBusiness.length>0))},dependencies:[c,f,w,E,M],styles:["tr[_ngcontent-%COMP%]{color:#000!important}"]})};var N=class i{constructor(t){this.http=t}api_url=L.apiUrl;SaveHistorique(t){return this.http.post(this.api_url+"/api/historiques/save_historique",t)}ReadAllHistoriqueByUser(t){return this.http.post(this.api_url+"/api/historiques/read_all_historique_by_user",t)}DeleteHistoriques(t){return this.http.post(this.api_url+"/api/historiques/delete_historiques",t)}static \u0275fac=function(e){return new(e||i)(D(A))};static \u0275prov=P({token:i,factory:i.\u0275fac,providedIn:"root"})};function ne(i,t){if(i&1&&(o(0,"div",19)(1,"span",20),a(2,"i",21),r(3),s()()),i&2){let e=b();l(3),d(" ",e.business==null?null:e.business.bu_category," ")}}function se(i,t){i&1&&(o(0,"div",22),a(1,"div",23),s())}function oe(i,t){if(i&1&&(o(0,"a",24),a(1,"i",25),r(2," Site Web "),s()),i&2){let e=b();u("href",e.business==null?null:e.business.bu_website,R)}}function re(i,t){if(i&1&&(o(0,"div",30),a(1,"img",31),s()),i&2){let e=t.$implicit;l(),u("src",e,R)}}function le(i,t){if(i&1&&(o(0,"div",26)(1,"h4",27),r(2,"Galerie"),s(),o(3,"div",28),m(4,re,2,1,"div",29),s()()),i&2){let e=b();l(4),u("ngForOf",e.business.bu_gallery)}}function ae(i,t){if(i&1){let e=k();o(0,"button",32),h("click",function(){I(e);let g=b();return B(g.scrollToTop())}),r(1,` Go back up \u2191
`),s()}}var j=class i{constructor(t,e,n,g){this.route=t;this.http=e;this.router=n;this.api=g}business;histo_infos;backToTopBtnVisible=!1;userEmail;businessUid;loading=!1;textSearch;user_infos;user_id;ngOnInit(){this.router.params.subscribe(n=>{this.businessUid=n.bu_uid,console.log(this.businessUid)}),this.readSingleBusiness();let t=sessionStorage.getItem("textSearch");this.textSearch=t,console.log(this.textSearch),t&&(this.textSearch=JSON.parse(t),console.log("textSearch:",this.textSearch));let e=sessionStorage.getItem("user_infos");this.user_infos=e,console.log(this.user_infos),e&&(this.user_infos=JSON.parse(e),this.user_id=this.user_infos.u_uid,console.log("user_id:",this.user_id))}backStep(){sessionStorage.removeItem("single_business"),history.back()}readSingleBusiness(){this.loading=!0;let t={bu_uid:this.businessUid};this.http.ReadSingleBusiness(t).subscribe({next:e=>{console.log(this.business),console.log("user_id: ",this.user_id),this.saveHistorique(),e?.status==="success"?(setTimeout(()=>{this.loading=!1,this.business=e?.business},2e3),e.business&&sessionStorage.setItem("single_business",JSON.stringify(e.business))):this.business=[]},error:e=>{console.error("Failed to load products:",e)}})}saveHistorique(){this.loading=!0;let t={bu_uid:this.businessUid,u_uid:this.user_id,textSearch:this.textSearch};this.api.SaveHistorique(t).subscribe({next:e=>{e?.status==="success"?setTimeout(()=>{this.loading=!1,this.histo_infos=e?.histo_infos},2e3):this.business=[]},error:e=>{console.error("Failed to load products:",e)}})}onScroll(){let t=document.documentElement.scrollTop||document.body.scrollTop;this.backToTopBtnVisible=t>200}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}static \u0275fac=function(e){return new(e||i)(p(T),p(O),p($),p(N))};static \u0275cmp=_({type:i,selectors:[["app-readsingle-business"]],hostBindings:function(e,n){e&1&&h("scroll",function(U){return n.onScroll(U)},!1,V)},standalone:!0,features:[v],decls:27,vars:12,consts:[[1,"container","mt-5","mb-5"],[1,"card","shadow-lg","border-0","rounded-4","overflow-hidden"],[1,"row","g-0"],[1,"col-md-5"],[1,"img-fluid","h-100","w-100","object-fit-cover",3,"src","alt"],[1,"col-md-7"],[1,"card-body","p-4"],[1,"card-title","fw-bold","mb-3","text-black"],[1,"text-muted"],[1,"bi","bi-geo-alt-fill","text-secondary","me-2"],[1,"bi","bi-house-fill","text-secondary","me-2"],[1,"mt-4"],["class","mt-3",4,"ngIf"],["class","spinner-overlay",4,"ngIf"],[1,"btn","btn-warning","rounded-pill","me-3","back-btp-style",3,"click"],[1,"bi","bi-arrow-left"],["class","btn btn-outline-primary rounded-pill","target","_blank",3,"href",4,"ngIf"],["class","mt-5",4,"ngIf"],["id","backToTopBtn","style","background: none; border: none; color: black; font-size: 1.2rem; cursor: pointer;",3,"click",4,"ngIf"],[1,"mt-3"],[1,"badge","bg-info","text-dark","px-3","py-2","rounded-pill"],[1,"bi","bi-tag"],[1,"spinner-overlay"],[1,"spinner"],["target","_blank",1,"btn","btn-outline-primary","rounded-pill",3,"href"],[1,"bi","bi-globe"],[1,"mt-5"],[1,"mb-4","fw-semibold","text-center"],[1,"row","g-3"],["class","col-md-4",4,"ngFor","ngForOf"],[1,"col-md-4"],["alt","Galerie",1,"img-fluid","rounded","shadow-sm","object-fit-cover",2,"height","250px","width","100%",3,"src"],["id","backToTopBtn",2,"background","none","border","none","color","black","font-size","1.2rem","cursor","pointer",3,"click"]],template:function(e,n){e&1&&(a(0,"app-header"),o(1,"section",0)(2,"div",1)(3,"div",2)(4,"div",3),a(5,"img",4),s(),o(6,"div",5)(7,"div",6)(8,"h2",7),r(9),s(),o(10,"p",8),a(11,"i",9),r(12),s(),o(13,"p",8),a(14,"i",10),r(15),s(),o(16,"p",11),r(17),s(),m(18,ne,4,1,"div",12)(19,se,2,0,"div",13),o(20,"div",11)(21,"a",14),h("click",function(){return n.backStep()}),a(22,"i",15),r(23," Retour "),s(),m(24,oe,3,1,"a",16),s()()()()(),m(25,le,5,1,"div",17),s(),m(26,ae,2,0,"button",18)),e&2&&(l(5),z("alt","Image de ",n.business==null?null:n.business.bu_name,""),u("src",(n.business==null?null:n.business.bu_picture)||"assets/img/default.jpg",R),l(4),y(n.business==null?null:n.business.bu_name),l(3),d("",n.business==null?null:n.business.bu_city," "),l(3),d("",n.business==null?null:n.business.bu_address," "),l(2),y(n.business==null?null:n.business.bu_description),l(),u("ngIf",n.business==null?null:n.business.bu_category),l(),u("ngIf",n.loading),l(5),u("ngIf",n.business==null?null:n.business.bu_website),l(),u("ngIf",(n.business==null||n.business.bu_gallery==null?null:n.business.bu_gallery.length)>0),l(),u("ngIf",n.backToTopBtnVisible))},dependencies:[M,f,w,E,c,W],styles:[".spinner-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#fff9;display:flex;justify-content:center;align-items:center;z-index:9999}.spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:5px solid #ccc;border-top-color:#0f2027;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.back-btp-style[_ngcontent-%COMP%]{background:linear-gradient(to right,#ffc107,#6d5203);color:#fff;border:none;border-radius:25px;font-weight:700;cursor:pointer;transition:background .3s ease;box-shadow:0 5px 15px #0003}.back-btp-style[_ngcontent-%COMP%]:hover{background:linear-gradient(to right,#0f2027,#203a43,#2c5364)}"]})};var ue=[{path:"",component:F,children:[{path:"",redirectTo:"create-business",pathMatch:"full"},{path:"readall-business",component:H},{path:"readsingle-business/:bu_uid",component:j}]}],q=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=C({type:i});static \u0275inj=S({imports:[c.forChild(ue),c]})};var X=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=C({type:i});static \u0275inj=S({imports:[f,q]})};export{X as BusinessModule};
