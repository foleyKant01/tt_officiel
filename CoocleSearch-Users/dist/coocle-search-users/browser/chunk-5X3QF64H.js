import{a as ge,b as V}from"./chunk-WQ6E55H7.js";import{a as se,b as re,c as ae,d as le,e as ce,f as de,g as me,h as ue,i as pe,l as A,m as fe}from"./chunk-UXYWELNR.js";import{A as l,B as x,F as f,H as d,I as U,J as o,K as s,L as c,M as J,N as $,O as h,P as p,Q as u,R as G,S as r,T as S,U as E,W as y,X as T,Y as I,Z as W,a as w,b as k,ea as L,fa as H,ga as B,ha as C,ia as te,k as X,l as P,la as ie,ma as ne,n as Y,na as N,o as b,oa as oe,p as F,qa as v,s as g,t as _,y as Z,z as ee}from"./chunk-AZOYDBOK.js";var M=class n{constructor(i){this.http=i}api_url=fe.apiUrl;ReadAllFavorisByUser(i){return this.http.post(this.api_url+"/api/favoris/read_all_favoris_by_user",i)}SaveFavoris(i){return this.http.post(this.api_url+"/api/favoris/save_favoris",i)}DeleteFavoris(i){return this.http.post(this.api_url+"/api/favoris/delete_favoris",i)}ReadAllHistoriqueByUser(i){return this.http.post(this.api_url+"/api/historiques/read_all_historique_by_user",i)}DeleteHistoriques(i){return this.http.post(this.api_url+"/api/historiques/delete_historiques",i)}static \u0275fac=function(e){return new(e||n)(Y(te))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};var ye=()=>["/auth/login/"],Ce=()=>["/profil"],Se=()=>["/user/activites"],we=n=>({"tablet-fullwidth":n}),ke=n=>({active:n});function Ee(n,i){n&1&&(o(0,"a",44),r(1," Connexion "),s()),n&2&&d("routerLink",T(1,ye))}function Ae(n,i){if(n&1){let e=h();o(0,"button",45),p("click",function(){g(e);let a=u();return _(a.toggleProfileMenu())}),c(1,"i",46),s()}}function Me(n,i){if(n&1){let e=h();o(0,"div",47)(1,"a",48),c(2,"i",49),r(3," Profil "),s(),o(4,"a",48),c(5,"i",50),r(6," Activit\xE9s "),s(),o(7,"a",51),p("click",function(){g(e);let a=u();return _(a.logout())}),c(8,"i",52),r(9," D\xE9connexion "),s()()}n&2&&(l(),d("routerLink",T(2,Ce)),l(3),d("routerLink",T(3,Se)))}function Oe(n,i){n&1&&(o(0,"div",53)(1,"div",54)(2,"span",55),r(3,"Chargement..."),s()()())}function Ie(n,i){n&1&&(o(0,"div",56)(1,"h4",57),r(2,"Aucun r\xE9sultat trouv\xE9."),s()())}function Pe(n,i){if(n&1&&(o(0,"p",68),c(1,"i",74),o(2,"a",75),r(3),s()()),n&2){let e=u().$implicit;l(2),d("href",e.bu_website,Z),l(),S(e.bu_website)}}function Fe(n,i){if(n&1&&(o(0,"p",68),c(1,"i",76),r(2),s()),n&2){let e=u().$implicit;l(2),E(" ",e.bu_city," ")}}function Te(n,i){if(n&1){let e=h();o(0,"div",60)(1,"div",61)(2,"button",62),p("click",function(){let a=g(e).$implicit,m=u(2);return _(m.toggleFavorite(a))}),c(3,"i",63),s(),o(4,"div",26)(5,"div",64)(6,"div",65)(7,"h5",66),r(8),s(),o(9,"p",67),r(10),s(),o(11,"p",68),c(12,"i",69),r(13),s(),f(14,Pe,4,2,"p",70)(15,Fe,3,1,"p",70),o(16,"div",71)(17,"button",72),p("click",function(){let a=g(e).$implicit,m=u(2);return _(m.readSingleBusiness(a.bu_uid))}),c(18,"i",73),r(19," Voir "),s()()()()()()()}if(n&2){let e=i.$implicit,t=u(2);d("ngClass",I(8,we,t.All_business.length===1)),l(2),d("ngClass",I(10,ke,t.isFavorite(e))),l(),d("ngClass",t.isFavorite(e)?"fa-heart":"fa-heart-broken"),l(5),S(e.bu_name),l(2),S(e.bu_description),l(3),E(" ",e.phone,""),l(),d("ngIf",e.bu_type!=="physique"),l(),d("ngIf",e.bu_type==="physique")}}function Le(n,i){if(n&1&&(o(0,"div",58),f(1,Te,20,12,"div",59),s()),n&2){let e=u();l(),d("ngForOf",e.All_business.slice(0,e.visibleCount))}}function He(n,i){if(n&1){let e=h();o(0,"div",77)(1,"button",78),p("click",function(){g(e);let a=u();return _(a.showAll())}),r(2,"Voir plus"),s()()}}function Be(n,i){if(n&1){let e=h();o(0,"button",79),p("click",function(){g(e);let a=u();return _(a.scrollToTop())}),r(1,` Go back up \u2191
`),s()}}var R=class n{constructor(i,e,t,a){this.router=i;this.http=e;this.route=t;this.api=a}data;textSearch;search_form=new ce({textSearch:new de(null,re.required)});All_business=[];searchDone=!1;backToTopBtnVisible=!1;isLoggedIn=!1;dataBusiness;user_infos;user_id;localisation;coordonne;loading=!1;favoriteList=[];Searchbusiness(){this.loading=!0,this.searchDone=!1;let i=this.search_form.get("textSearch")?.value.trim();if(!i){this.loading=!1;return}let e={textSearch:i,user_id:this.user_id,latitude:this.coordonne.latitude,longitude:this.coordonne.longitude};this.http.SearchBusinessByCategorie(e).subscribe({next:t=>{console.log("Response:",t),t?.status==="success"&&Array.isArray(t.business)?(setTimeout(()=>{this.All_business=t.business,this.searchDone=!0,this.loading=!1},2e3),sessionStorage.setItem("All_business",JSON.stringify(t.business)),sessionStorage.setItem("businessList",JSON.stringify(t.business)),sessionStorage.setItem("textSearch",JSON.stringify(t.textSearch))):(this.All_business=[],sessionStorage.setItem("All_business",JSON.stringify([])),sessionStorage.setItem("textSearch",JSON.stringify(t?.textSearch||"")),this.searchDone=!0,this.loading=!1)},error:t=>{console.error("Erreur lors de la recherche :",t),this.All_business=[],this.searchDone=!0,this.loading=!1,t.error instanceof ProgressEvent?console.log("Erreur li\xE9e \xE0 un mauvais format JSON ou content-type."):console.log("R\xE9ponse du serveur :",t.error)}}),this.createStats()}createStats(){let i=this.search_form.get("textSearch")?.value.trim();if(!i)return;let e={textSearch:i,all_business_found:this.All_business,city:this.localisation.city,commune:this.localisation.commune,longitude:this.coordonne.longitude,latitude:this.coordonne.latitude};this.http.CreateStats(e).subscribe({next:t=>{t?.status==="success"&&console.log("message: ",t.message)},error:t=>{console.error("Failed to load products:",t)}})}logout(){sessionStorage.removeItem("access_token"),sessionStorage.removeItem("businessList"),sessionStorage.removeItem("user_infos"),this.router.navigate(["/auth/login"])}navigateToHome(){window.location.pathname==="/user/home"?(sessionStorage.removeItem("All_business"),sessionStorage.removeItem("single_business"),sessionStorage.removeItem("textSearch"),window.location.reload()):window.location.href="/user/home"}readSingleBusiness(i){this.router.navigate(["/user/business/readsingle-business",i])}visibleCount=6;get visibleBusinessList(){return this.All_business.slice(0,this.visibleCount)}showAll(){this.visibleCount=this.All_business.length}onScroll(){let i=document.documentElement.scrollTop||document.body.scrollTop;this.backToTopBtnVisible=i>200}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}profileMenuVisible=!1;toggleProfileMenu(){this.profileMenuVisible=!this.profileMenuVisible}unloadCallback=()=>{sessionStorage.removeItem("All_business"),sessionStorage.removeItem("single_business"),sessionStorage.removeItem("textSearch")};isFavorite(i){return i.is_favs===1}toggleFavorite(i){this.favoriteList=this.All_business.filter(t=>t.is_favs===1);let e=this.All_business.findIndex(t=>t.bu_uid===i.bu_uid);e>-1&&(this.All_business[e].is_favs=this.All_business[e].is_favs===1?0:1,this.favoriteList=this.All_business.filter(t=>t.is_favs===1),sessionStorage.setItem("All_business",JSON.stringify(this.All_business)),this.All_business[e].is_favs===1?this.saveFavoris(this.All_business[e]):this.deleteFavoris(this.All_business[e]))}saveFavoris(i){let e=k(w({},i),{user_id:this.user_id});console.log("payload:",e),this.api.SaveFavoris(e).subscribe({next:t=>{console.log("Response:",t.status)},error:t=>{console.error("Erreur lors de la recherche :",t),this.favoriteList=[]}})}deleteFavoris(i){let e=k(w({},i),{user_id:this.user_id});console.log("payload:",e),this.api.DeleteFavoris(e).subscribe({next:t=>{console.log("Response:",t)},error:t=>{console.error("Erreur lors de la recherche :",t),this.favoriteList=[]}})}ngOnInit(){let i=sessionStorage.getItem("user_infos");if(this.isLoggedIn=!!i,this.user_infos=i,console.log(this.user_infos),i){this.user_infos=JSON.parse(i),this.user_id=this.user_infos.u_uid,console.log("user_id:",this.user_id),this.route.queryParams.subscribe(be=>{let Q=be.data;console.log("data:",this.data),Q&&(this.All_business=JSON.parse(Q),console.log(this.All_business))});let e=JSON.parse(sessionStorage.getItem("All_business")||"null"),t=JSON.parse(sessionStorage.getItem("textSearch")||"null"),a=JSON.parse(sessionStorage.getItem("localisation")||"null"),m=JSON.parse(sessionStorage.getItem("coordonne")||"null");e?(console.log("Business infos trouv\xE9 en session:",e),this.All_business=e):console.warn("Aucun Business trouv\xE9 dans sessionStorage"),t?(console.log("textSearch infos trouv\xE9 en session:",t),this.textSearch=t):console.warn("Aucun Business trouv\xE9 dans sessionStorage"),a?(console.log("localisation infos trouv\xE9 en session:",a),this.localisation=a):console.warn("Aucun localisation trouv\xE9 dans sessionStorage"),m?(console.log("coordonne infos trouv\xE9 en session:",m),this.coordonne=m):console.warn("Aucun coordonne trouv\xE9 dans sessionStorage"),window.addEventListener("beforeunload",this.unloadCallback)}this.getCurrentLocationAndAddress()}getCurrentLocationAndAddress(){navigator.geolocation?navigator.geolocation.getCurrentPosition(i=>{let e=i.coords.latitude,t=i.coords.longitude;console.log("Latitude:",e,"Longitude:",t),this.getCityAndCommuneFromCoords(e,t).then(a=>{sessionStorage.setItem("localisation",JSON.stringify(a)),sessionStorage.setItem("coordonne",JSON.stringify(i.coords))})},i=>{console.error("Erreur de g\xE9olocalisation :",i.message)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0}):console.error("La g\xE9olocalisation n\u2019est pas prise en charge par ce navigateur.")}getCityAndCommuneFromCoords(i,e){let t=`https://nominatim.openstreetmap.org/reverse?format=json&lat=${i}&lon=${e}&zoom=18&addressdetails=1`;return fetch(t,{headers:{"User-Agent":"CoocleSearch/1.0 (your@email.com)"}}).then(a=>a.json()).then(a=>{let m=a.address;return{city:m.city||m.town||m.village||m.state,commune:m.suburb||m.neighbourhood||m.city_district}}).catch(a=>(console.error("Erreur g\xE9ocodage inverse :",a),{}))}static \u0275fac=function(e){return new(e||n)(x(N),x(ge),x(ie),x(M))};static \u0275cmp=b({type:n,selectors:[["app-home"]],hostBindings:function(e,t){e&1&&p("scroll",function(m){return t.onScroll(m)},!1,ee)},standalone:!0,features:[y],decls:78,vars:10,consts:[[1,"masthead","responsive-header","pt-0",2,"background","linear-gradient(to right, #0f2027, #203a43, #2c5364)"],[1,"p-3",2,"margin-bottom","8rem","background-color","transparent","text-align","right"],["class","forgot text-white","style","text-decoration: underline;",3,"routerLink",4,"ngIf"],["class","btn btnprofil text-white p-0 position-relative","style","margin-right: 1.5rem;","type","button",3,"click",4,"ngIf"],["class","profile-menu dropdown-menu show","style","right: 1.5rem; top: 3.5rem;",4,"ngIf"],[1,"container","position-relative"],[1,"row","justify-content-center"],[1,"col-xl-6"],[1,"text-center","text-white"],[1,"d-flex","justify-content-center","logo",2,"cursor","pointer",3,"click"],[1,"mb-2","me-3","text-center"],[1,"fas","fa-laugh-wink","fa-2x",2,"color","#ffc107","transform","rotate(-30deg)"],["id","contactForm",1,"form-subscribe",3,"ngSubmit","formGroup"],[1,"col-md-7","mb-2"],["formControlName","textSearch","id","textSearch","type","text","placeholder","Tapez ici pour rechercher...",1,"form-control","rounded-pill","shadow-sm",2,"height","45px"],[1,"col-md-auto"],["type","submit",1,"btn","btn-warning","rounded-pill","px-3","shadow-sm",2,"height","45px","line-height","1",3,"disabled"],["class","loading-overlay",4,"ngIf"],[1,"position-relative",2,"min-height","80px"],["class","position-absolute top-50 start-50 translate-middle text-white text-center",4,"ngIf"],[1,"m-5"],["class","row mt-4",4,"ngIf"],["class","text-center",4,"ngIf"],[1,"showcase"],[1,"text-center","mb-4"],[1,"container-fluid","p-0"],[1,"row","g-0"],[1,"col-lg-6","order-lg-2","text-white","showcase-img",2,"background-image","url('assets/img/bg-showcase-1.jpg')"],[1,"col-lg-6","order-lg-1","my-auto","showcase-text"],[1,"lead","mb-0"],[1,"col-lg-6","text-white","showcase-img",2,"background-image","url('assets/img/bg-showcase-2.jpg')"],[1,"col-lg-6","my-auto","showcase-text"],[1,"col-lg-6","order-lg-2","text-white","showcase-img",2,"background-image","url('assets/img/bg-showcase-3.jpg')"],[1,"features-icons","bg-white","text-center","py-5"],[1,"container"],[1,"mb-5","fw-bold"],[1,"row"],[1,"col-lg-4"],[1,"mb-4"],[1,"bi","bi-phone","display-4","text-warning"],[1,"mt-3"],[1,"bi","bi-lightning-charge","display-4","text-primary"],[1,"bi","bi-stars","display-4","text-success"],["id","backToTopBtn","style","background: none; border: none; color: black; font-size: 1.2rem; cursor: pointer;",3,"click",4,"ngIf"],[1,"forgot","text-white",2,"text-decoration","underline",3,"routerLink"],["type","button",1,"btn","btnprofil","text-white","p-0","position-relative",2,"margin-right","1.5rem",3,"click"],[1,"bi","bi-person-circle","fs-4"],[1,"profile-menu","dropdown-menu","show",2,"right","1.5rem","top","3.5rem"],[1,"dropdown-item","d-flex","align-items-center","gap-2",3,"routerLink"],[1,"bi","bi-person-fill"],[1,"bi","bi-star-fill"],[1,"dropdown-item","d-flex","align-items-center","gap-2",3,"click"],[1,"bi","bi-box-arrow-right"],[1,"loading-overlay"],["role","status",1,"spinner-border","text-light"],[1,"visually-hidden"],[1,"position-absolute","top-50","start-50","translate-middle","text-white","text-center"],[1,"m-0"],[1,"row","mt-4"],["class","col-md-4 col-12",3,"ngClass",4,"ngFor","ngForOf"],[1,"col-md-4","col-12",3,"ngClass"],[1,"card","mb-3","position-relative"],["title","Ajouter aux favoris",1,"btn","btn-fav",3,"click","ngClass"],[1,"fas",3,"ngClass"],[1,"col-md-12"],[1,"card-body"],[1,"card-title","fw-bold","text-black"],[1,"card-text","text-muted"],[1,"card-text","m-0"],[1,"bi","bi-telephone-fill","text-secondary"],["class","card-text m-0",4,"ngIf"],[1,"mt-3","text-end"],["type","button","onmouseover","this.style.background='linear-gradient(135deg, #ffc107, #6d5203)'","onmouseout","this.style.background='linear-gradient(135deg, #6d5203, #ffc107)'",1,"btn","btn-sm","d-inline-flex","align-items-center","gap-2","rounded-pill","shadow","viewbusiness",3,"click"],[1,"bi","bi-eye-fill",2,"font-size","1rem"],[1,"bi","bi-globe2","text-secondary"],["target","_blank",3,"href"],[1,"bi","bi-geo-alt-fill","text-secondary"],[1,"text-center"],[1,"btn","btn-outline-primary","showAll",3,"click"],["id","backToTopBtn",2,"background","none","border","none","color","black","font-size","1.2rem","cursor","pointer",3,"click"]],template:function(e,t){if(e&1&&(o(0,"header",0)(1,"div",1),f(2,Ee,2,2,"a",2)(3,Ae,2,0,"button",3)(4,Me,10,4,"div",4),s(),o(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9),p("click",function(){return t.navigateToHome()}),o(10,"h1",10),r(11,"Coocle Search"),s(),c(12,"i",11),s(),o(13,"form",12),p("ngSubmit",function(){return t.Searchbusiness()}),o(14,"div",6)(15,"div",13),c(16,"input",14),s(),o(17,"div",15)(18,"button",16),r(19," Search "),s()()(),f(20,Oe,4,0,"div",17),s(),o(21,"div",18),f(22,Ie,3,0,"div",19),s()()()()()(),o(23,"section",20),f(24,Le,2,1,"div",21)(25,He,3,0,"div",22),s(),o(26,"section",23)(27,"h3",24),r(28,"Autres actualit\xE9s"),s(),o(29,"div",25)(30,"div",26),c(31,"div",27),o(32,"div",28)(33,"h2"),r(34,"Fully Responsive Design"),s(),o(35,"p",29),r(36,"When you use a theme created by Start Bootstrap, you know that the theme will look great on any device, whether it's a phone, tablet, or desktop the page will behave responsively!"),s()()(),o(37,"div",26),c(38,"div",30),o(39,"div",31)(40,"h2"),r(41,"Updated For Bootstrap 5"),s(),o(42,"p",29),r(43,"Newly improved, and full of great utility classes, Bootstrap 5 is leading the way in mobile responsive web development! All of the themes on Start Bootstrap are now using Bootstrap 5!"),s()()(),o(44,"div",26),c(45,"div",32),o(46,"div",28)(47,"h2"),r(48,"Easy to Use & Customize"),s(),o(49,"p",29),r(50,"Landing Page is just HTML and CSS with a splash of SCSS for users who demand some deeper customization options. Out of the box, just add your content and images, and your new landing page will be ready to go!"),s()()()()(),o(51,"section",33)(52,"div",34)(53,"h2",35),r(54,"Pourquoi utiliser Coocle ?"),s(),o(55,"div",36)(56,"div",37)(57,"div",38),c(58,"i",39),o(59,"h4",40),r(60,"100% Responsive"),s(),o(61,"p"),r(62,"Accessible sur tous les appareils, partout et \xE0 tout moment."),s()()(),o(63,"div",37)(64,"div",38),c(65,"i",41),o(66,"h4",40),r(67,"Ultra Rapide"),s(),o(68,"p"),r(69,"Des r\xE9sultats instantan\xE9s et pertinents \xE0 vos recherches."),s()()(),o(70,"div",37)(71,"div",38),c(72,"i",42),o(73,"h4",40),r(74,"Simple & Intuitif"),s(),o(75,"p"),r(76,"Une interface agr\xE9able et facile \xE0 utiliser pour tous."),s()()()()()(),f(77,Be,2,0,"button",43)),e&2){let a;l(2),d("ngIf",!t.isLoggedIn),l(),d("ngIf",t.user_infos),l(),d("ngIf",t.profileMenuVisible),l(9),d("formGroup",t.search_form),l(5),d("disabled",((a=t.search_form.get("textSearch"))==null?null:a.invalid)||((a=t.search_form.get("textSearch"))==null?null:a.value.trim())===""),l(2),d("ngIf",t.loading),l(2),d("ngIf",(t.textSearch||t.searchDone)&&t.All_business.length===0),l(2),d("ngIf",t.All_business.length>0),l(),d("ngIf",t.All_business.length>t.visibleCount),l(52),d("ngIf",t.backToTopBtnVisible)}},dependencies:[A,me,se,ae,le,ue,pe,C,L,H,B,v,oe],styles:['@charset "UTF-8";a[_ngcontent-%COMP%]{color:#000;text-decoration:none;cursor:pointer}.forgot[_ngcontent-%COMP%]{color:#3131f7;text-decoration:underline;cursor:pointer;position:relative;z-index:10}#backToTopBtn[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;display:block;border-radius:50%;padding:10px;font-size:20px;background-color:#007bff;color:#fff;border:none;cursor:pointer;z-index:1000}#backToTopBtn[_ngcontent-%COMP%]:hover{background-color:#0056b3}.profile-menu[_ngcontent-%COMP%]{position:absolute;z-index:1050;min-width:170px;background:#fff;border:1px solid #ccc;border-radius:.5rem;box-shadow:0 4px 12px #00000026}.profile-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:active, .profile-menu[_ngcontent-%COMP%]   .dropdown-item.active[_ngcontent-%COMP%]{background-color:transparent!important;color:inherit!important}.profile-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{transition:background-color .2s ease,color .2s ease;border-radius:.375rem}.profile-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:hover{background-color:#4d7a8d;color:#000}.viewbusiness[_ngcontent-%COMP%]{background:linear-gradient(to right,#0f2027,#203a43,#2c5364);color:#fff;padding:.2rem .5rem;font-weight:500;transition:all .3s ease;border:0}.showAll[_ngcontent-%COMP%]{border:solid,1px,#0f2027;color:#203a43}.showAll[_ngcontent-%COMP%]:hover{background:linear-gradient(to right,#a37b04,#dda706);color:#fff;border:solid,1px,#a37b04}.loading-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#21252980;z-index:9999;display:flex;align-items:center;justify-content:center}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.btn-fav[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;background:#fff;color:#2c5364;border:none;font-size:1.32rem;z-index:10;border-radius:50%;padding:6px 10px;box-shadow:0 2px 6px #0000001a;transition:transform .2s ease}.btn-fav[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.btn-fav.active[_ngcontent-%COMP%]{color:#ffc107}@media (max-width: 576px){.responsive-header[_ngcontent-%COMP%]{padding-top:0!important;padding-bottom:1rem!important;margin-bottom:3rem!important}.responsive-header[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{padding-top:1rem!important;padding-bottom:1rem!important;margin-top:-3rem}.responsive-header[_ngcontent-%COMP%]   .btnprofil[_ngcontent-%COMP%]{margin-top:-.5rem!important;margin-right:0rem!important}.responsive-header[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]{margin-top:-1rem!important;margin-right:-1rem!important}.responsive-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .responsive-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem!important}.responsive-header[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{margin-top:1rem}}.logo[_ngcontent-%COMP%]{cursor:pointer}.shadow-sm[_ngcontent-%COMP%]{border:0}@media (min-width: 768px) and (max-width: 991.98px){.tablet-fullwidth[_ngcontent-%COMP%]{flex:0 0 100%;max-width:100%}}']})};var j=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=b({type:n,selectors:[["app-user"]],standalone:!0,features:[y],decls:1,vars:0,template:function(e,t){e&1&&c(0,"router-outlet")},dependencies:[v,ne]})};var D=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=b({type:n,selectors:[["app-favoris"]],standalone:!0,features:[y],decls:31,vars:0,consts:[[1,"m-5","text-start"],[1,"favorites-container"],[1,"favorite-card"],[1,"card-header"],[1,"fas","fa-store","me-2"],[1,"fas","fa-heart","icon-fav"],[1,"card-description"],[1,"card-footer"],["onmouseover","this.style.background='linear-gradient(135deg, #ffc107, #6d5203)'","onmouseout","this.style.background='linear-gradient(135deg, #6d5203, #ffc107)'",1,"btn"],[1,"fas","fa-utensils","me-2"]],template:function(e,t){e&1&&(c(0,"app-header"),o(1,"section")(2,"h1",0),r(3,"Mes Favoris"),s(),o(4,"div",1)(5,"div",2)(6,"div",3)(7,"h3"),c(8,"i",4),r(9," Boutique Omega"),s(),c(10,"i",5),s(),o(11,"div",6),r(12," Sp\xE9cialiste en v\xEAtements de luxe pour hommes. Situ\xE9 \xE0 Abidjan, Cocody Angr\xE9. "),s(),o(13,"div",7)(14,"button",8),r(15,"Voir"),s(),o(16,"button",8),r(17,"Retirer"),s()()(),o(18,"div",2)(19,"div",3)(20,"h3"),c(21,"i",9),r(22," Chicken Palace"),s(),c(23,"i",5),s(),o(24,"div",6),r(25," Restaurant sp\xE9cialis\xE9 en poulet brais\xE9. Livraison rapide \xE0 domicile. "),s(),o(26,"div",7)(27,"button",8),r(28,"Voir"),s(),o(29,"button",8),r(30,"Retirer"),s()()()()())},dependencies:[A,C,v,V]})};var Ne=n=>({active:n});function Ve(n,i){if(n&1){let e=h();o(0,"div",12)(1,"div",13)(2,"button",14),p("click",function(){let a=g(e).$implicit,m=u(3);return _(m.toggleFavorite(a))}),c(3,"i",15),s(),o(4,"div",16)(5,"div",17)(6,"div",18)(7,"h5",19),r(8),s(),o(9,"div",20)(10,"p",21)(11,"small"),r(12,"Categorie :"),s(),r(13),s(),o(14,"div",22)(15,"button",23),p("click",function(){let a=g(e).$implicit,m=u(3);return _(m.readSingleBusiness(a.bu_uid))}),c(16,"i",24),r(17," Voir "),s()()()()()()()()}if(n&2){let e=i.$implicit,t=u(3);l(2),d("ngClass",I(4,Ne,t.isFavorite(e))),l(),d("ngClass",t.isFavorite(e)?"fa-heart":"fa-heart-broken"),l(5),S(e.bu_name),l(5),E(" ",e.bu_categorie," ")}}function Re(n,i){if(n&1&&(J(0),f(1,Ve,18,6,"div",11),$()),n&2){let e=u(2);l(),d("ngForOf",e.favs_List.slice(0,e.visibleCount))}}function je(n,i){n&1&&(o(0,"div",25),c(1,"i",26)(2,"br"),r(3," Aucun favori trouv\xE9. "),s())}function De(n,i){if(n&1&&(o(0,"div",9),f(1,Re,2,1,"ng-container",10)(2,je,4,0,"ng-template",null,0,W),s()),n&2){let e=G(3),t=u();l(),d("ngIf",t.favs_List.length>0)("ngIfElse",e)}}function qe(n,i){if(n&1){let e=h();o(0,"div",29)(1,"div",30)(2,"h5",31),c(3,"i",32),r(4),s(),c(5,"i",33),s(),o(6,"p",34),r(7),s(),o(8,"div",35)(9,"button",36),p("click",function(){let a=g(e).$implicit,m=u(3);return _(m.deleteHistorique(a.h_uid))}),c(10,"i",37),s(),o(11,"button",38),p("click",function(){let a=g(e).$implicit,m=u(3);return _(m.readSingleBusiness(a.bu_uid))}),c(12,"i",39),s()()()}if(n&2){let e=i.$implicit;l(4),E(" ",e.bu_name," "),l(3),S(e.bu_description)}}function ze(n,i){if(n&1&&(J(0),f(1,qe,13,2,"div",28),$()),n&2){let e=u(2);l(),d("ngForOf",e.histo_List)}}function Ue(n,i){n&1&&(o(0,"div",40),c(1,"i",41),o(2,"p"),r(3,"Aucun historique disponible pour le moment."),s()())}function Je(n,i){if(n&1&&(o(0,"div",27),f(1,ze,2,1,"ng-container",10)(2,Ue,4,0,"ng-template",null,1,W),s()),n&2){let e=G(3),t=u();l(),d("ngIf",t.histo_List.length>0)("ngIfElse",e)}}function $e(n,i){n&1&&(o(0,"div",42)(1,"div",43)(2,"span",44),r(3,"Chargement..."),s()()())}var q=class n{constructor(i,e){this.router=i;this.http=e}favs_List=[];histo_List=[];user_infos;user_id;bu_name;businessList=[];favoriteList=[];loading=!1;isLoading=!1;currentTab="favoris";readAllFavorisByUser(){this.loading=!0;let i={user_id:this.user_id};this.http.ReadAllFavorisByUser(i).subscribe({next:e=>{console.log("response favs_List:",e),e?.status==="success"&&Array.isArray(e.favs_informations)?setTimeout(()=>{this.loading=!1,this.favs_List=e.favs_informations},1e3):this.favs_List=[]},error:e=>{console.error("Erreur lors du chargement :",e),this.favs_List=[]}})}readAllHistoriqueByUser(){this.loading=!0;let i={user_id:this.user_id};this.http.ReadAllHistoriqueByUser(i).subscribe({next:e=>{e?.status==="success"?(this.histo_List=e.histo_informations,this.bu_name=e.histo_informations.bu_name,console.log("histo_List:",this.histo_List),console.log("bu_name:",this.bu_name),setTimeout(()=>{this.loading=!1,this.histo_List=e.histo_informations},2e3)):this.histo_List=[]},error:e=>{console.error("Erreur lors du chargement :",e),this.histo_List=[]}})}readSingleBusiness(i){this.router.navigate(["/user/business/readsingle-business",i])}visibleCount=6;get visibleBusinessList(){return this.businessList.slice(0,this.visibleCount)}isFavorite(i){return i.is_favs===1}toggleFavorite(i){this.favoriteList=this.businessList.filter(t=>t.is_favs===1);let e=this.businessList.findIndex(t=>t.bu_uid===i.bu_uid);e>-1&&(this.businessList[e].is_favs=this.businessList[e].is_favs===1?0:1,this.favoriteList=this.businessList.filter(t=>t.is_favs===1),sessionStorage.setItem("businessList",JSON.stringify(this.businessList)),this.businessList[e].is_favs===1?this.saveFavoris(this.businessList[e]):this.deleteFavoris(this.businessList[e])),window.location.reload()}saveFavoris(i){let e=k(w({},i),{user_id:this.user_id});console.log("payload:",e),this.http.SaveFavoris(e).subscribe({next:t=>{console.log("Response:",t.status)},error:t=>{console.error("Erreur lors de la recherche :",t),this.favoriteList=[]}})}deleteFavoris(i){let e=k(w({},i),{user_id:this.user_id});console.log("payload:",e),this.http.DeleteFavoris(e).subscribe({next:t=>{console.log("Response:",t)},error:t=>{console.error("Erreur lors de la recherche :",t),this.favoriteList=[]}})}deleteHistorique(i){this.isLoading=!0;let e={h_uid:i};this.http.DeleteHistoriques(e).subscribe({next:t=>{this.isLoading=!1,t?.status==="success"&&(console.log("success:"),window.location.reload())},error:t=>{this.isLoading=!1}})}ngOnInit(){let i=sessionStorage.getItem("user_infos");this.user_infos=i,console.log(this.user_infos),i&&(this.user_infos=JSON.parse(i),this.user_id=this.user_infos.u_uid,console.log("user_id:",this.user_id),this.readAllFavorisByUser(),this.readAllHistoriqueByUser());let e=JSON.parse(sessionStorage.getItem("businessList")||"null");e?(console.log("Business infos trouv\xE9 en session:",e),this.businessList=e):console.warn("Aucun Business trouv\xE9 dans sessionStorage")}static \u0275fac=function(e){return new(e||n)(x(N),x(M))};static \u0275cmp=b({type:n,selectors:[["app-activites"]],standalone:!0,features:[y],decls:11,vars:7,consts:[["noFavorites",""],["noHistory",""],[1,"activity-container"],[1,"activity-tabs"],[1,"tab-btn",3,"click"],[1,"activity-content"],["class","favorites-container",4,"ngIf"],["class","history-container",4,"ngIf"],["class","loading-overlay",4,"ngIf"],[1,"favorites-container"],[4,"ngIf","ngIfElse"],["class","col-md-6",4,"ngFor","ngForOf"],[1,"col-md-6"],[1,"card","mb-3","position-relative"],["title","Ajouter aux favoris",1,"btn","btn-fav",3,"click","ngClass"],[1,"fas",3,"ngClass"],[1,"row","g-0"],[1,"col-md-12"],[1,"card-body"],[1,"card-title","fw-bold","text-black"],[1,"d-flex"],[1,"card-text","m-0","col-md-10"],[1,"mt-3","text-end"],["type","button","onmouseover","this.style.background='linear-gradient(135deg, #ffc107, #6d5203)'","onmouseout","this.style.background='linear-gradient(135deg, #6d5203, #ffc107)'",1,"btn","btn-sm","d-inline-flex","align-items-center","gap-2","rounded-pill","shadow","viewbusiness",3,"click"],[1,"bi","bi-eye-fill",2,"font-size","1rem"],[1,"text-center","mt-4","text-muted"],[1,"fas","fa-heart-broken","fa-2x","mb-2"],[1,"history-container"],["class","history-card card shadow-sm mb-4 p-3 rounded-4 border-0",4,"ngFor","ngForOf"],[1,"history-card","card","shadow-sm","mb-4","p-3","rounded-4","border-0"],[1,"d-flex","justify-content-between","align-items-center","mb-2"],[1,"mb-0","fw-bold","text-dark"],[1,"fas","fa-history","me-2","text-primary"],[1,"fas","fa-clock","text-muted"],[1,"text-muted","mb-3"],[1,"d-flex","justify-content-end","gap-2"],["type","button",1,"btn","btn-outline-danger","btn-sm","rounded-pill","shadow-sm","px-3",3,"click"],[1,"bi","bi-trash-fill"],["type","button",1,"btn","btn-sm","rounded-pill","shadow-sm","px-3","show",3,"click"],[1,"bi","bi-eye-fill"],[1,"text-center","mt-5","text-muted"],[1,"fas","fa-history","fa-2x","mb-3","d-block"],[1,"loading-overlay"],["role","status",1,"spinner-border","text-light"],[1,"visually-hidden"]],template:function(e,t){e&1&&(c(0,"app-header"),o(1,"div",2)(2,"div",3)(3,"button",4),p("click",function(){return t.currentTab="favoris"}),r(4,"Favoris"),s(),o(5,"button",4),p("click",function(){return t.currentTab="historique"}),r(6,"Historique"),s()(),o(7,"div",5),f(8,De,4,2,"div",6),s(),f(9,Je,4,2,"div",7)(10,$e,4,0,"div",8),s()),e&2&&(l(3),U("active",t.currentTab==="favoris"),l(2),U("active",t.currentTab==="historique"),l(3),d("ngIf",t.currentTab==="favoris"),l(),d("ngIf",t.currentTab==="historique"),l(),d("ngIf",t.loading))},dependencies:[A,C,L,H,B,v,V],styles:[".activity-container[_ngcontent-%COMP%]{max-width:1000px;margin:40px auto;font-family:Segoe UI,sans-serif;padding:20px;background:#f7f9fc;color:#000;border-radius:12px;box-shadow:0 4px 12px #0000001a}.activity-tabs[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:30px}.activity-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent;border:none;padding:12px 30px;margin:0 15px;font-weight:700;font-size:16px;cursor:pointer;color:#333;border-bottom:3px solid transparent;transition:.3s ease}.activity-tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{border-bottom:3px solid #ffc107;color:#ffc107}.favorites-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.favorite-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #ddd;border-radius:12px;padding:20px;box-shadow:0 2px 8px #0000000d;transition:box-shadow .3s ease}.favorite-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #0000001a}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px}.card-description[_ngcontent-%COMP%]{font-size:15px;color:#555;margin-bottom:15px}.card-footer[_ngcontent-%COMP%]{display:flex;gap:10px}.loading-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#21252980;z-index:9999;display:flex;align-items:center;justify-content:center}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.viewbusiness[_ngcontent-%COMP%]{background:linear-gradient(to right,#0f2027,#203a43,#2c5364);color:#fff;padding:.2rem .5rem;font-weight:500;transition:all .3s ease;border:0}.btn-fav[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;background:#fff;color:#2c5364;border:none;font-size:1.3rem;z-index:10;border-radius:50%;padding:6px 10px;box-shadow:0 2px 6px #0000001a;transition:transform .2s ease}.btn-fav[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.btn-fav.active[_ngcontent-%COMP%]{color:#ffc107}.activity-tabs[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;background:transparent;font-weight:700;color:#666;border-bottom:2px solid transparent;transition:all .3s ease}.activity-tabs[_ngcontent-%COMP%]   .tab-btn.active[_ngcontent-%COMP%]{border-color:#ffc107;color:#000}.btn.viewbusiness[_ngcontent-%COMP%], .show[_ngcontent-%COMP%]{background:linear-gradient(to right,#0f2027,#203a43,#2c5364);color:#fff;transition:background .3s ease}.btn.viewbusiness[_ngcontent-%COMP%]:hover, .show[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#ffc107,#6d5203)}.btn-danger-hover[_ngcontent-%COMP%]{background:linear-gradient(135deg,#a71d2a,#dc3545)}.btn-danger-hover[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#dc3545,#a71d2a)}"]})};var Ge=[{path:"",component:j,children:[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:R},{path:"activites",component:q},{path:"favoris",component:D},{path:"business",loadChildren:()=>import("./chunk-SLGJTQVP.js").then(n=>n.BusinessModule)}]}],z=class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=F({type:n});static \u0275inj=P({imports:[v.forChild(Ge),v]})};var he=class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=F({type:n});static \u0275inj=P({imports:[C,z]})};export{he as UserModule};
