import{a as O,b as W}from"./chunk-HIZIRRWS.js";import{k as G,l as M,m as J}from"./chunk-CNERRJOK.js";import{A as z,B as r,C as b,G as m,I as a,K as o,L as s,M as u,P as T,Q as h,R as d,T as l,U as y,V as c,X as v,ga as k,ha as E,ia as f,ja as A,k as D,l as C,ma as L,n as P,na as $,oa as w,p as _,q as B,ra as p,t as I,u as R,y as V,z as x}from"./chunk-K5W2ORV2.js";var F=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=_({type:t,selectors:[["app-business"]],standalone:!0,features:[v],decls:1,vars:0,template:function(e,n){e&1&&u(0,"router-outlet")},dependencies:[p,$,G,f]})};function ee(t,i){if(t&1){let e=T();o(0,"tr",9)(1,"td",10),l(2),s(),o(3,"td"),l(4),s(),o(5,"td"),l(6),s(),o(7,"td"),l(8),s(),o(9,"td"),l(10),s(),o(11,"td"),l(12),s(),o(13,"td")(14,"button",11),h("click",function(){let g=I(e).$implicit,U=d(2);return R(U.Readsinglebusiness(g.bu_uid))}),u(15,"i",12),s()()()}if(t&2){let e=i.$implicit,n=i.index;r(2),y(n+1),r(2),c(" ",e==null?null:e.t_uid," "),r(2),c(" ",e==null?null:e.bu_categorie," "),r(2),c(" ",e==null?null:e.bu_type," "),r(2),c(" ",e==null?null:e.bu_name," "),r(2),c(" ",e==null?null:e.bu_city," ")}}function te(t,i){if(t&1&&(o(0,"table",5)(1,"thead",6)(2,"tr")(3,"th",7)(4,"b"),l(5,"#"),s()(),o(6,"td")(7,"b"),l(8,"User"),s()(),o(9,"td")(10,"b"),l(11,"Categorie"),s()(),o(12,"td")(13,"b"),l(14,"Type"),s()(),o(15,"td")(16,"b"),l(17,"Name"),s()(),o(18,"td")(19,"b"),l(20,"City"),s()(),o(21,"td")(22,"b"),l(23,"Edit"),s()()()(),o(24,"tbody"),m(25,ee,16,6,"tr",8),s()()),t&2){let e=d();r(25),a("ngForOf",e.dataBusiness)}}var H=class t{constructor(i,e){this.router=i;this.http=e}business=[];dataCategorie=[];deleteResult=[];dataBusiness=[];allBusiness=[];allCategories=[];tellerUid;ngOnInit(){}Readsinglebusiness(i){this.router.navigate(["/teller/business/readsingle-business",i])}static \u0275fac=function(e){return new(e||t)(b(w),b(O))};static \u0275cmp=_({type:t,selectors:[["app-readall-business"]],standalone:!0,features:[v],decls:7,vars:1,consts:[[1,"container","p-0",2,"position","relative","top","30px","bottom","30px","width","100%"],[1,"",2,"color","black"],[1,"row"],[1,"col-12","-responsive"],["class","table report_gcc",4,"ngIf"],[1,"table","report_gcc"],[2,"color","black"],["scope","col"],["class","op-06",4,"ngFor","ngForOf"],[1,"op-06"],[1,"ps-3"],["type","button",1,"btn",2,"width","50%","margin-left","-5px",3,"click"],[1,"fa-solid","fa-eye",2,"color","#e9af00"]],template:function(e,n){e&1&&(o(0,"div",0)(1,"h3",1),l(2,"All Business"),s(),u(3,"br"),o(4,"div",2)(5,"div",3),m(6,te,26,1,"table",4),s()()()),e&2&&(r(6),a("ngIf",n.dataBusiness&&n.dataBusiness.length>0))},dependencies:[p,f,k,E,M],styles:["tr[_ngcontent-%COMP%]{color:#000!important}"]})};var j=class t{constructor(i){this.http=i}api_url=J.apiUrl;SaveHistorique(i){return this.http.post(this.api_url+"/api/historiques/save_historique",i)}ReadAllHistoriqueByUser(i){return this.http.post(this.api_url+"/api/historiques/read_all_historique_by_user",i)}DeleteHistoriques(i){return this.http.post(this.api_url+"/api/historiques/delete_historiques",i)}static \u0275fac=function(e){return new(e||t)(P(A))};static \u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"})};function ne(t,i){if(t&1&&(o(0,"p",21),u(1,"i",22),l(2),s()),t&2){let e=d();r(2),c("",e.business==null?null:e.business.bu_city," ")}}function se(t,i){if(t&1&&(o(0,"p",21),u(1,"i",23),l(2),s()),t&2){let e=d();r(2),c("",e.business==null?null:e.business.bu_address," ")}}function oe(t,i){if(t&1&&(o(0,"div",24)(1,"span",25),u(2,"i",26),l(3),s()()),t&2){let e=d();r(3),c(" ",e.business==null?null:e.business.bu_category," ")}}function re(t,i){t&1&&(o(0,"div",27),u(1,"div",28),s())}function le(t,i){if(t&1&&(o(0,"a",29),u(1,"i",30),l(2," Localisation "),s()),t&2){let e=d();a("href",e.business==null?null:e.business.localisation,x)}}function ae(t,i){if(t&1&&(o(0,"a",29),u(1,"i",31),l(2," Site Web "),s()),t&2){let e=d();a("href",e.business==null?null:e.business.bu_website,x)}}function ue(t,i){if(t&1&&(o(0,"div",36),u(1,"img",37),s()),t&2){let e=i.$implicit;r(),a("src",e,x)}}function de(t,i){if(t&1&&(o(0,"div",32)(1,"h4",33),l(2,"Galerie"),s(),o(3,"div",34),m(4,ue,2,1,"div",35),s()()),t&2){let e=d();r(4),a("ngForOf",e.business.bu_gallery)}}function ce(t,i){if(t&1){let e=T();o(0,"button",38),h("click",function(){I(e);let g=d();return R(g.scrollToTop())}),l(1,` Go back up \u2191
`),s()}}var q=class t{constructor(i,e,n,g){this.route=i;this.http=e;this.router=n;this.api=g}business;histo_infos;backToTopBtnVisible=!1;userEmail;businessUid;loading=!1;textSearch;user_infos;user_id;formattedDescription="";ngOnInit(){this.router.params.subscribe(n=>{this.businessUid=n.bu_uid,console.log(this.businessUid)}),this.readSingleBusiness();let i=sessionStorage.getItem("textSearch");this.textSearch=i,console.log(this.textSearch),i&&(this.textSearch=JSON.parse(i),console.log("textSearch:",this.textSearch));let e=sessionStorage.getItem("user_infos");this.user_infos=e,console.log(this.user_infos),e&&(this.user_infos=JSON.parse(e),this.user_id=this.user_infos.u_uid,console.log("user_id:",this.user_id))}backStep(){sessionStorage.removeItem("single_business"),history.back()}readSingleBusiness(){this.loading=!0;let i={bu_uid:this.businessUid};this.http.ReadSingleBusiness(i).subscribe({next:e=>{console.log(this.business),console.log("user_id: ",this.user_id),this.saveHistorique(),e?.status==="success"?(setTimeout(()=>{this.loading=!1,this.business=e?.business;let n=this.business?.bu_description||"";this.formattedDescription=n.replace(/\./g,".<br>")},2e3),e.business&&sessionStorage.setItem("single_business",JSON.stringify(e.business))):this.business=[]},error:e=>{console.error("Failed to load products:",e)}})}saveHistorique(){this.loading=!0;let i={bu_uid:this.businessUid,u_uid:this.user_id,textSearch:this.textSearch};this.api.SaveHistorique(i).subscribe({next:e=>{e?.status==="success"?setTimeout(()=>{this.loading=!1,this.histo_infos=e?.histo_infos},2e3):this.business=[]},error:e=>{console.error("Failed to load products:",e)}})}onScroll(){let i=document.documentElement.scrollTop||document.body.scrollTop;this.backToTopBtnVisible=i>200}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}static \u0275fac=function(e){return new(e||t)(b(w),b(O),b(L),b(j))};static \u0275cmp=_({type:t,selectors:[["app-readsingle-business"]],hostBindings:function(e,n){e&1&&h("scroll",function(U){return n.onScroll(U)},!1,z)},standalone:!0,features:[v],decls:29,vars:13,consts:[[1,"container","mt-5","mb-5"],[1,"card","shadow-lg","border-0","rounded-4","overflow-hidden"],[1,"row","g-0"],[1,"col-md-5"],["alt","PUB",1,"img-fluid","h-100","w-100","object-fit-cover",3,"src"],[1,"col-md-7"],[1,"card-body","p-4"],[1,"card-title","fw-bolder","fs-2","mb-3","text-black"],["class","text-muted",4,"ngIf"],[1,"card-text","m-0"],[1,"bi","bi-telephone-fill","text-secondary"],[1,"mt-4"],[3,"innerHTML"],["class","mt-3",4,"ngIf"],["class","spinner-overlay",4,"ngIf"],[1,"mt-4","d-flex","justify-content-between"],[1,"btn","btn-warning","rounded-pill","me-3","back-btp-style",3,"click"],[1,"bi","bi-arrow-left"],["class","btn btn-outline-primary rounded-pill","target","_blank",3,"href",4,"ngIf"],["class","mt-5",4,"ngIf"],["id","backToTopBtn","style","background: none; border: none; color: black; font-size: 1.2rem; cursor: pointer;",3,"click",4,"ngIf"],[1,"text-muted"],[1,"bi","bi-geo-alt-fill","text-secondary","me-2"],[1,"bi","bi-house-fill","text-secondary","me-2"],[1,"mt-3"],[1,"badge","bg-info","text-dark","px-3","py-2","rounded-pill"],[1,"bi","bi-tag"],[1,"spinner-overlay"],[1,"spinner"],["target","_blank",1,"btn","btn-outline-primary","rounded-pill",3,"href"],[1,"bi","bi-geo-alt-fill"],[1,"bi","bi-globe"],[1,"mt-5"],[1,"mb-4","fw-semibold","text-center"],[1,"row","g-3"],["class","col-md-4",4,"ngFor","ngForOf"],[1,"col-md-4"],["alt","Galerie",1,"img-fluid","rounded","shadow-sm","object-fit-cover",2,"height","250px","width","100%",3,"src"],["id","backToTopBtn",2,"background","none","border","none","color","black","font-size","1.2rem","cursor","pointer",3,"click"]],template:function(e,n){e&1&&(u(0,"app-header"),o(1,"section",0)(2,"div",1)(3,"div",2)(4,"div",3),u(5,"img",4),s(),o(6,"div",5)(7,"div",6)(8,"h2",7),l(9),s(),m(10,ne,3,1,"p",8)(11,se,3,1,"p",8),o(12,"p",9),u(13,"i",10),l(14),s(),o(15,"p",11)(16,"b"),l(17),s()(),u(18,"p",12),m(19,oe,4,1,"div",13)(20,re,2,0,"div",14),o(21,"div",15)(22,"a",16),h("click",function(){return n.backStep()}),u(23,"i",17),l(24," Retour "),s(),m(25,le,3,1,"a",18)(26,ae,3,1,"a",18),s()()()()(),m(27,de,5,1,"div",19),s(),m(28,ce,2,0,"button",20)),e&2&&(r(5),a("src","assets/img/default.jpg",x),r(4),y(n.business==null?null:n.business.bu_name),r(),a("ngIf",(n.business==null?null:n.business.bu_type)=="physique"),r(),a("ngIf",(n.business==null?null:n.business.bu_type)=="physique"),r(3),c(" ",n.business.phone,""),r(3),y(n.business==null?null:n.business.bu_categorie),r(),a("innerHTML",n.formattedDescription,V),r(),a("ngIf",n.business==null?null:n.business.bu_category),r(),a("ngIf",n.loading),r(5),a("ngIf",(n.business==null?null:n.business.bu_type)=="physique"),r(),a("ngIf",(n.business==null?null:n.business.bu_type)=="en-ligne"),r(),a("ngIf",(n.business==null||n.business.bu_gallery==null?null:n.business.bu_gallery.length)>0),r(),a("ngIf",n.backToTopBtnVisible))},dependencies:[M,f,k,E,p,W],styles:[".spinner-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#fff9;display:flex;justify-content:center;align-items:center;z-index:9999}.spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:5px solid #ccc;border-top-color:#0f2027;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.back-btp-style[_ngcontent-%COMP%]{background:linear-gradient(to right,#ffc107,#6d5203);color:#fff;border:none;border-radius:25px;font-weight:700;cursor:pointer;transition:background .3s ease;box-shadow:0 5px 15px #0003}.back-btp-style[_ngcontent-%COMP%]:hover{background:linear-gradient(to right,#0f2027,#203a43,#2c5364)}"]})};var me=[{path:"",component:F,children:[{path:"",redirectTo:"create-business",pathMatch:"full"},{path:"readall-business",component:H},{path:"readsingle-business/:bu_uid",component:q}]}],N=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=B({type:t});static \u0275inj=C({imports:[p.forChild(me),p]})};var X=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=B({type:t});static \u0275inj=C({imports:[f,N]})};export{X as BusinessModule};
