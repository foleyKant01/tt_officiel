import{a as _e,b as N}from"./chunk-HIZIRRWS.js";import{a as se,b as ae,c as le,d as ce,e as de,f as me,g as ue,h as pe,i as fe,l as O,m as ge}from"./chunk-CNERRJOK.js";import{A as te,B as l,C as x,G as f,I as d,J,K as o,L as r,M as c,N as $,O as G,P as v,Q as p,R as u,S as W,T as s,U as S,V as w,X as y,Y as F,Z as I,_ as K,a as E,b as k,fa as L,ga as H,ha as V,ia as C,ja as ie,k as Y,l as P,ma as ne,n as Z,na as oe,oa as B,p as b,pa as re,q as T,ra as h,t as g,u as _,z as ee}from"./chunk-K5W2ORV2.js";var M=class n{constructor(i){this.http=i}api_url=ge.apiUrl;ReadAllFavorisByUser(i){return this.http.post(this.api_url+"/api/favoris/read_all_favoris_by_user",i)}SaveFavoris(i){return this.http.post(this.api_url+"/api/favoris/save_favoris",i)}DeleteFavoris(i){return this.http.post(this.api_url+"/api/favoris/delete_favoris",i)}ReadAllHistoriqueByUser(i){return this.http.post(this.api_url+"/api/historiques/read_all_historique_by_user",i)}DeleteHistoriques(i){return this.http.post(this.api_url+"/api/historiques/delete_historiques",i)}static \u0275fac=function(e){return new(e||n)(Z(ie))};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})};var Ce=()=>["/auth/login/"],Se=()=>["/profil"],we=()=>["/user/activites"],Ee=n=>({"tablet-fullwidth":n}),ke=n=>({active:n});function Oe(n,i){n&1&&(o(0,"a",46),s(1," Connexion "),r()),n&2&&d("routerLink",F(1,Ce))}function Me(n,i){if(n&1){let e=v();o(0,"button",47),p("click",function(){g(e);let a=u();return _(a.toggleProfileMenu())}),c(1,"i",48),r()}}function Ae(n,i){if(n&1){let e=v();o(0,"div",49)(1,"a",50),c(2,"i",51),s(3," Profil "),r(),o(4,"a",50),c(5,"i",52),s(6," Activit\xE9s "),r(),o(7,"a",53),p("click",function(){g(e);let a=u();return _(a.logout())}),c(8,"i",54),s(9," D\xE9connexion "),r()()}n&2&&(l(),d("routerLink",F(2,Se)),l(3),d("routerLink",F(3,we)))}function Ie(n,i){if(n&1){let e=v();o(0,"div",55)(1,"div",56)(2,"span",57),s(3," Bienvenue sur "),o(4,"strong"),s(5,"Coocle Search"),r(),s(6,", votre moteur de recherche pr\xE9f\xE9r\xE9 ! Trouvez tout, et \xE0 proximit\xE9 en un clin d'\u0153il. Une exp\xE9rience rapide, simple et locale. "),r(),o(7,"button",58),p("click",function(){g(e);let a=u();return _(a.runApp())}),s(8,"OK"),r()()()}}function Pe(n,i){if(n&1){let e=v();o(0,"div",55)(1,"div",59)(2,"p"),s(3,"La g\xE9olocalisation est d\xE9sactiv\xE9e. Pour une meilleure exp\xE9rience veuillez autoriser la position lors de la demande ou dans les param\xE8tres de votre navigateur."),r(),o(4,"div",60)(5,"a",61),s(6,"Autoriser la position"),r(),o(7,"button",62),p("click",function(){g(e);let a=u();return _(a.navigateToHome())}),s(8,"Autorisation eff\xE8ctuer"),r()()()()}}function Te(n,i){n&1&&(o(0,"div",63)(1,"div",64)(2,"span",65),s(3,"Chargement..."),r()()())}function Fe(n,i){n&1&&(o(0,"div",66)(1,"h4",67),s(2,"Aucun r\xE9sultat trouv\xE9."),r()())}function Le(n,i){if(n&1&&(o(0,"p",78),c(1,"i",84),o(2,"a",85),s(3),r()()),n&2){let e=u().$implicit;l(2),d("href",e.bu_website,ee),l(),S(e.bu_website)}}function He(n,i){if(n&1&&(o(0,"p",78),c(1,"i",86),s(2),r()),n&2){let e=u().$implicit;l(2),w(" ",e.bu_city," ")}}function Ve(n,i){if(n&1){let e=v();o(0,"div",70)(1,"div",71)(2,"button",72),p("click",function(){let a=g(e).$implicit,m=u(2);return _(m.toggleFavorite(a))}),c(3,"i",73),r(),o(4,"div",28)(5,"div",74)(6,"div",75)(7,"h5",76),s(8),r(),o(9,"p",77),s(10),r(),o(11,"p",78),c(12,"i",79),s(13),r(),f(14,Le,4,2,"p",80)(15,He,3,1,"p",80),o(16,"div",81)(17,"button",82),p("click",function(){let a=g(e).$implicit,m=u(2);return _(m.readSingleBusiness(a.bu_uid))}),c(18,"i",83),s(19," Voir "),r()()()()()()()}if(n&2){let e=i.$implicit,t=u(2);d("ngClass",I(8,Ee,t.All_business.length===1)),l(2),d("ngClass",I(10,ke,t.isFavorite(e))),l(),d("ngClass",t.isFavorite(e)?"fa-heart":"fa-heart-broken"),l(5),S(e.bu_name),l(2),S(e.bu_description),l(3),w(" ",e.phone,""),l(),d("ngIf",e.bu_type!=="physique"),l(),d("ngIf",e.bu_type==="physique")}}function Be(n,i){if(n&1&&(o(0,"div",68),f(1,Ve,20,12,"div",69),r()),n&2){let e=u();l(),d("ngForOf",e.All_business.slice(0,e.visibleCount))}}function Ne(n,i){if(n&1){let e=v();o(0,"div",87)(1,"button",88),p("click",function(){g(e);let a=u();return _(a.showAll())}),s(2,"Voir plus"),r()()}}function Re(n,i){if(n&1){let e=v();o(0,"button",89),p("click",function(){g(e);let a=u();return _(a.scrollToTop())}),s(1,` Go back up \u2191
`),r()}}var R=class n{constructor(i,e,t,a){this.router=i;this.http=e;this.route=t;this.api=a}data;textSearch;is_run;search_form=new de({textSearch:new me(null,ae.required)});All_business=[];searchDone=!1;backToTopBtnVisible=!1;isLoggedIn=!1;dataBusiness;user_infos;user_id;localisation;coordonne;loading=!1;favoriteList=[];Searchbusiness(){this.loading=!0,this.searchDone=!1;let i=this.search_form.get("textSearch")?.value.trim();if(!i){this.loading=!1;return}let e={textSearch:i,user_id:this.user_id,latitude:this.coordonne.latitude,longitude:this.coordonne.longitude};this.http.SearchBusinessByCategorie(e).subscribe({next:t=>{console.log("Response:",t),t?.status==="success"&&Array.isArray(t.business)?(setTimeout(()=>{this.All_business=t.business,this.searchDone=!0,this.loading=!1},2e3),sessionStorage.setItem("All_business",JSON.stringify(t.business)),sessionStorage.setItem("businessList",JSON.stringify(t.business)),sessionStorage.setItem("textSearch",JSON.stringify(t.textSearch))):(this.All_business=[],sessionStorage.setItem("All_business",JSON.stringify([])),sessionStorage.setItem("textSearch",JSON.stringify(t?.textSearch||"")),this.searchDone=!0,this.loading=!1)},error:t=>{console.error("Erreur lors de la recherche :",t),this.All_business=[],this.searchDone=!0,this.loading=!1,t.error instanceof ProgressEvent?console.log("Erreur li\xE9e \xE0 un mauvais format JSON ou content-type."):console.log("R\xE9ponse du serveur :",t.error)}}),this.createStats()}createStats(){let i=this.search_form.get("textSearch")?.value.trim();if(!i)return;let e={textSearch:i,all_business_found:this.All_business,city:this.localisation.city,commune:this.localisation.commune,longitude:this.coordonne.longitude,latitude:this.coordonne.latitude};this.http.CreateStats(e).subscribe({next:t=>{t?.status==="success"&&console.log("message: ",t.message)},error:t=>{console.error("Failed to load products:",t)}})}logout(){sessionStorage.removeItem("access_token"),sessionStorage.removeItem("businessList"),sessionStorage.removeItem("user_infos"),sessionStorage.removeItem("is_run"),this.router.navigate(["/auth/login"])}runApp(){window.location.pathname==="/user/home"?(window.location.reload(),sessionStorage.setItem("is_run",JSON.stringify("1"))):window.location.href="/user/home"}navigateToHome(){window.location.pathname==="/user/home"?(window.location.reload(),this.getCurrentLocationAndAddress()):window.location.href="/user/home"}readSingleBusiness(i){this.router.navigate(["/user/business/readsingle-business",i])}visibleCount=6;get visibleBusinessList(){return this.All_business.slice(0,this.visibleCount)}showAll(){this.visibleCount=this.All_business.length}onScroll(){let i=document.documentElement.scrollTop||document.body.scrollTop;this.backToTopBtnVisible=i>200}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}profileMenuVisible=!1;toggleProfileMenu(){this.profileMenuVisible=!this.profileMenuVisible}unloadCallback=()=>{sessionStorage.removeItem("All_business"),sessionStorage.removeItem("single_business"),sessionStorage.removeItem("textSearch")};isFavorite(i){return i.is_favs===1}toggleFavorite(i){this.favoriteList=this.All_business.filter(t=>t.is_favs===1);let e=this.All_business.findIndex(t=>t.bu_uid===i.bu_uid);e>-1&&(this.All_business[e].is_favs=this.All_business[e].is_favs===1?0:1,this.favoriteList=this.All_business.filter(t=>t.is_favs===1),sessionStorage.setItem("All_business",JSON.stringify(this.All_business)),this.All_business[e].is_favs===1?this.saveFavoris(this.All_business[e]):this.deleteFavoris(this.All_business[e]))}saveFavoris(i){let e=k(E({},i),{user_id:this.user_id});console.log("payload:",e),this.api.SaveFavoris(e).subscribe({next:t=>{console.log("Response:",t.status)},error:t=>{console.error("Erreur lors de la recherche :",t),this.favoriteList=[]}})}deleteFavoris(i){let e=k(E({},i),{user_id:this.user_id});console.log("payload:",e),this.api.DeleteFavoris(e).subscribe({next:t=>{console.log("Response:",t)},error:t=>{console.error("Erreur lors de la recherche :",t),this.favoriteList=[]}})}ngOnInit(){this.getCurrentLocationAndAddress();let i=sessionStorage.getItem("user_infos"),e=sessionStorage.getItem("is_run");if(this.is_run=e,this.isLoggedIn=!!i,this.user_infos=i,console.log(this.user_infos),i){this.user_infos=JSON.parse(i),this.user_id=this.user_infos.u_uid,console.log("user_id:",this.user_id),this.route.queryParams.subscribe(xe=>{let X=xe.data;console.log("data:",this.data),X&&(this.All_business=JSON.parse(X),console.log(this.All_business))});let t=JSON.parse(sessionStorage.getItem("All_business")||"null"),a=JSON.parse(sessionStorage.getItem("textSearch")||"null"),m=JSON.parse(sessionStorage.getItem("localisation")||"null"),U=JSON.parse(sessionStorage.getItem("coordonne")||"null");t?(console.log("Business infos trouv\xE9 en session:",t),this.All_business=t):console.warn("Aucun Business trouv\xE9 dans sessionStorage"),a?(console.log("textSearch infos trouv\xE9 en session:",a),this.textSearch=a):console.warn("Aucun Business trouv\xE9 dans sessionStorage"),m?(console.log("localisation infos trouv\xE9 en session:",m),this.localisation=m):console.warn("Aucun localisation trouv\xE9 dans sessionStorage"),U?(console.log("coordonne infos trouv\xE9 en session:",U),this.coordonne=U):console.warn("Aucun coordonne trouv\xE9 dans sessionStorage"),window.addEventListener("beforeunload",this.unloadCallback)}}getCurrentLocationAndAddress(){navigator.geolocation?navigator.geolocation.getCurrentPosition(i=>{let e=i.coords.latitude,t=i.coords.longitude;console.log("Latitude:",e,"Longitude:",t),this.getCityAndCommuneFromCoords(e,t).then(a=>{sessionStorage.setItem("localisation",JSON.stringify(a)),sessionStorage.setItem("coordonne",JSON.stringify(i.coords))})},i=>{console.error("Erreur de g\xE9olocalisation :",i.message)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0}):console.error("La g\xE9olocalisation n\u2019est pas prise en charge par ce navigateur.")}getCityAndCommuneFromCoords(i,e){let t=`https://nominatim.openstreetmap.org/reverse?format=json&lat=${i}&lon=${e}&zoom=18&addressdetails=1`;return fetch(t,{headers:{"User-Agent":"CoocleSearch/1.0 (your@email.com)"}}).then(a=>a.json()).then(a=>{let m=a.address;return{city:m.city||m.town||m.village||m.state,commune:m.suburb||m.neighbourhood||m.city_district}}).catch(a=>(console.error("Erreur g\xE9ocodage inverse :",a),{}))}static \u0275fac=function(e){return new(e||n)(x(B),x(_e),x(ne),x(M))};static \u0275cmp=b({type:n,selectors:[["app-home"]],hostBindings:function(e,t){e&1&&p("scroll",function(m){return t.onScroll(m)},!1,te)},standalone:!0,features:[y],decls:80,vars:12,consts:[[1,"masthead","responsive-header","pt-0",2,"background","linear-gradient(to right, #0f2027, #203a43, #2c5364)"],[1,"p-3",2,"margin-bottom","8rem","background-color","transparent","text-align","right"],["class","forgot text-white","style","text-decoration: underline;",3,"routerLink",4,"ngIf"],["class","btn btnprofil text-white p-0 position-relative","style","margin-right: 1.5rem;","type","button",3,"click",4,"ngIf"],["class","profile-menu dropdown-menu show","style","right: 1.5rem; top: 3.5rem;",4,"ngIf"],[1,"container","position-relative"],["class","overlay",4,"ngIf"],[1,"row","justify-content-center"],[1,"col-xl-6"],[1,"text-center","text-white"],[1,"d-flex","justify-content-center","logo",2,"cursor","pointer",3,"click"],[1,"mb-2","me-2","text-center"],[1,"fas","fa-laugh-wink","fa-2x","rotate-left",2,"color","#ffc107","transform","rotate(-30deg)"],["id","contactForm",1,"form-subscribe",3,"ngSubmit","formGroup"],[1,"col-md-7","mb-2"],["formControlName","textSearch","id","textSearch","type","text","placeholder","Tapez ici pour rechercher...",1,"form-control","rounded-pill","shadow-sm",2,"height","45px"],[1,"col-md-auto"],["type","submit",1,"btn","btn-warning","rounded-pill","px-3","shadow-sm","rotate-on-hover",2,"height","45px",3,"disabled"],[1,"fas","fa-search"],["class","loading-overlay",4,"ngIf"],[1,"position-relative",2,"min-height","80px"],["class","position-absolute top-50 start-50 translate-middle text-white text-center",4,"ngIf"],[1,"m-2"],["class","row mt-4",4,"ngIf"],["class","text-center",4,"ngIf"],[1,"showcase"],[1,"text-center","mb-4"],[1,"container-fluid","p-0"],[1,"row","g-0"],[1,"col-lg-6","order-lg-2","text-white","showcase-img",2,"background-image","url('assets/img/bg-showcase-1.jpg')"],[1,"col-lg-6","order-lg-1","my-auto","showcase-text"],[1,"lead","mb-0"],[1,"col-lg-6","text-white","showcase-img",2,"background-image","url('assets/img/bg-showcase-2.jpg')"],[1,"col-lg-6","my-auto","showcase-text"],[1,"col-lg-6","order-lg-2","text-white","showcase-img",2,"background-image","url('assets/img/bg-showcase-3.jpg')"],[1,"features-icons","bg-white","text-center","py-5"],[1,"container"],[1,"mb-5","fw-bold"],[1,"row"],[1,"col-lg-4"],[1,"mb-4"],[1,"bi","bi-phone","display-4","text-warning"],[1,"mt-3"],[1,"bi","bi-lightning-charge","display-4","text-primary"],[1,"bi","bi-stars","display-4","text-success"],["id","backToTopBtn","style","background: none; border: none; color: black; font-size: 1.2rem; cursor: pointer;",3,"click",4,"ngIf"],[1,"forgot","text-white",2,"text-decoration","underline",3,"routerLink"],["type","button",1,"btn","btnprofil","text-white","p-0","position-relative",2,"margin-right","1.5rem",3,"click"],[1,"bi","bi-person-circle","fs-4"],[1,"profile-menu","dropdown-menu","show",2,"right","1.5rem","top","3.5rem"],[1,"dropdown-item","d-flex","align-items-center","gap-2",3,"routerLink"],[1,"bi","bi-person-fill"],[1,"bi","bi-star-fill"],[1,"dropdown-item","d-flex","align-items-center","gap-2",3,"click"],[1,"bi","bi-box-arrow-right"],[1,"overlay"],[1,"custom-alert","alert","alert-light","d-flex","flex-column","justify-content-center","align-items-center","text-center"],[1,"mb-3"],[1,"btn","run",3,"click"],[1,"custom-alert","alert","alert-warning","d-flex","flex-column","justify-content-center","align-items-center","text-center"],[1,"col-12","d-flex","justify-content-between"],["href","https://support.google.com/chrome/answer/142065","target","_blank",1,"btn","btn-warning"],[1,"btn","btn-dark",3,"click"],[1,"loading-overlay"],["role","status",1,"spinner-border","text-light"],[1,"visually-hidden"],[1,"position-absolute","top-50","start-50","translate-middle","text-white","text-center"],[1,"m-0"],[1,"row","mt-4"],["class","col-md-4 col-12",3,"ngClass",4,"ngFor","ngForOf"],[1,"col-md-4","col-12",3,"ngClass"],[1,"card","mb-3","position-relative"],["title","Ajouter aux favoris",1,"btn","btn-fav",3,"click","ngClass"],[1,"fas",3,"ngClass"],[1,"col-md-12"],[1,"card-body"],[1,"card-title","fw-bold","text-black"],[1,"card-text","text-muted"],[1,"card-text","m-0"],[1,"bi","bi-telephone-fill","text-secondary"],["class","card-text m-0",4,"ngIf"],[1,"mt-3","text-end"],["type","button","onmouseover","this.style.background='linear-gradient(135deg, #ffc107, #6d5203)'","onmouseout","this.style.background='linear-gradient(135deg, #6d5203, #ffc107)'",1,"btn","btn-sm","d-inline-flex","align-items-center","gap-2","rounded-pill","shadow","viewbusiness",3,"click"],[1,"bi","bi-eye-fill",2,"font-size","1rem"],[1,"bi","bi-globe2","text-secondary"],["target","_blank",3,"href"],[1,"bi","bi-geo-alt-fill","text-secondary"],[1,"text-center"],[1,"btn","btn-outline-primary","showAll",3,"click"],["id","backToTopBtn",2,"background","none","border","none","color","black","font-size","1.2rem","cursor","pointer",3,"click"]],template:function(e,t){if(e&1&&(o(0,"header",0)(1,"div",1),f(2,Oe,2,2,"a",2)(3,Me,2,0,"button",3)(4,Ae,10,4,"div",4),r(),o(5,"div",5),f(6,Ie,9,0,"div",6)(7,Pe,9,0,"div",6),o(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10),p("click",function(){return t.navigateToHome()}),o(12,"h1",11),s(13,"Coocle Search"),r(),c(14,"i",12),r(),o(15,"form",13),p("ngSubmit",function(){return t.Searchbusiness()}),o(16,"div",7)(17,"div",14),c(18,"input",15),r(),o(19,"div",16)(20,"button",17),c(21,"i",18),r()()(),f(22,Te,4,0,"div",19),r(),o(23,"div",20),f(24,Fe,3,0,"div",21),r()()()()()(),o(25,"section",22),f(26,Be,2,1,"div",23)(27,Ne,3,0,"div",24),r(),o(28,"section",25)(29,"h3",26),s(30,"Autres actualit\xE9s"),r(),o(31,"div",27)(32,"div",28),c(33,"div",29),o(34,"div",30)(35,"h2"),s(36,"Fully Responsive Design"),r(),o(37,"p",31),s(38,"When you use a theme created by Start Bootstrap, you know that the theme will look great on any device, whether it's a phone, tablet, or desktop the page will behave responsively!"),r()()(),o(39,"div",28),c(40,"div",32),o(41,"div",33)(42,"h2"),s(43,"Updated For Bootstrap 5"),r(),o(44,"p",31),s(45,"Newly improved, and full of great utility classes, Bootstrap 5 is leading the way in mobile responsive web development! All of the themes on Start Bootstrap are now using Bootstrap 5!"),r()()(),o(46,"div",28),c(47,"div",34),o(48,"div",30)(49,"h2"),s(50,"Easy to Use & Customize"),r(),o(51,"p",31),s(52,"Landing Page is just HTML and CSS with a splash of SCSS for users who demand some deeper customization options. Out of the box, just add your content and images, and your new landing page will be ready to go!"),r()()()()(),o(53,"section",35)(54,"div",36)(55,"h2",37),s(56,"Pourquoi utiliser Coocle ?"),r(),o(57,"div",38)(58,"div",39)(59,"div",40),c(60,"i",41),o(61,"h4",42),s(62,"100% Responsive"),r(),o(63,"p"),s(64,"Accessible sur tous les appareils, partout et \xE0 tout moment."),r()()(),o(65,"div",39)(66,"div",40),c(67,"i",43),o(68,"h4",42),s(69,"Ultra Rapide"),r(),o(70,"p"),s(71,"Des r\xE9sultats instantan\xE9s et pertinents \xE0 vos recherches."),r()()(),o(72,"div",39)(73,"div",40),c(74,"i",44),o(75,"h4",42),s(76,"Simple & Intuitif"),r(),o(77,"p"),s(78,"Une interface agr\xE9able et facile \xE0 utiliser pour tous."),r()()()()()(),f(79,Re,2,0,"button",45)),e&2){let a;l(2),d("ngIf",!t.isLoggedIn),l(),d("ngIf",t.user_infos),l(),d("ngIf",t.profileMenuVisible),l(2),d("ngIf",(t.coordonne==null?null:t.coordonne.latitude)&&!t.is_run),l(),d("ngIf",!(t.coordonne!=null&&t.coordonne.latitude)),l(8),d("formGroup",t.search_form),l(5),d("disabled",((a=t.search_form.get("textSearch"))==null?null:a.invalid)||((a=t.search_form.get("textSearch"))==null?null:a.value.trim())===""),l(2),d("ngIf",t.loading),l(2),d("ngIf",(t.textSearch||t.searchDone)&&t.All_business.length===0),l(2),d("ngIf",t.All_business.length>0),l(),d("ngIf",t.All_business.length>t.visibleCount),l(52),d("ngIf",t.backToTopBtnVisible)}},dependencies:[O,ue,se,le,ce,pe,fe,C,L,H,V,h,re],styles:['@charset "UTF-8";a[_ngcontent-%COMP%]{color:#000;text-decoration:none;cursor:pointer}.forgot[_ngcontent-%COMP%]{color:#3131f7;text-decoration:underline;cursor:pointer;position:relative;z-index:10}@keyframes _ngcontent-%COMP%_slow-rotate{0%{transform:rotate(-10deg)}50%{transform:rotate(10deg)}to{transform:rotate(-10deg)}}.rotate-left[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slow-rotate 4s infinite ease-in-out}#backToTopBtn[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;display:block;border-radius:50%;padding:10px;font-size:20px;background-color:#007bff;color:#fff;border:none;cursor:pointer;z-index:1000}.rotate-on-hover[_ngcontent-%COMP%]{padding-left:0}.rotate-on-hover[_ngcontent-%COMP%]:hover{transform:rotate(15deg);transition:transform .3s ease}#backToTopBtn[_ngcontent-%COMP%]:hover{background-color:#0056b3}.run[_ngcontent-%COMP%]{background:linear-gradient(to right,#a37b04,#dda706);border:0px;padding:8px 15px}.profile-menu[_ngcontent-%COMP%]{position:absolute;z-index:1050;min-width:170px;background:#fff;border:1px solid #ccc;border-radius:.5rem;box-shadow:0 4px 12px #00000026}.profile-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:active, .profile-menu[_ngcontent-%COMP%]   .dropdown-item.active[_ngcontent-%COMP%]{background-color:transparent!important;color:inherit!important}.profile-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{transition:background-color .2s ease,color .2s ease;border-radius:.375rem}.profile-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:hover{background-color:#4d7a8d;color:#000}.viewbusiness[_ngcontent-%COMP%]{background:linear-gradient(to right,#0f2027,#203a43,#2c5364);color:#fff;padding:.2rem .5rem;font-weight:500;transition:all .3s ease;border:0}.overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;z-index:9999;display:flex;justify-content:center;align-items:center}.showAll[_ngcontent-%COMP%]{border:solid,1px,#0f2027;color:#203a43}.showAll[_ngcontent-%COMP%]:hover{background:linear-gradient(to right,#a37b04,#dda706);color:#fff;border:solid,1px,#a37b04}.loading-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#21252980;z-index:9999;display:flex;align-items:center;justify-content:center}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.btn-fav[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;background:#fff;color:#2c5364;border:none;font-size:1.32rem;z-index:10;border-radius:50%;padding:6px 10px;box-shadow:0 2px 6px #0000001a;transition:transform .2s ease}.btn-fav[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.btn-fav.active[_ngcontent-%COMP%]{color:#ffc107}@media (max-width: 576px){.responsive-header[_ngcontent-%COMP%]{padding-top:0!important;padding-bottom:1rem!important;margin-bottom:3rem!important}.responsive-header[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{padding-top:1rem!important;padding-bottom:1rem!important;margin-top:-3rem}.responsive-header[_ngcontent-%COMP%]   .btnprofil[_ngcontent-%COMP%]{margin-top:-.5rem!important;margin-right:0rem!important}.responsive-header[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]{margin-top:-1rem!important;margin-right:-1rem!important}.responsive-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .responsive-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem!important}.responsive-header[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{margin-top:1rem}}.logo[_ngcontent-%COMP%]{cursor:pointer}.shadow-sm[_ngcontent-%COMP%]{border:0}@media (min-width: 768px) and (max-width: 991.98px){.tablet-fullwidth[_ngcontent-%COMP%]{flex:0 0 100%;max-width:100%}}']})};var j=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=b({type:n,selectors:[["app-user"]],standalone:!0,features:[y],decls:1,vars:0,template:function(e,t){e&1&&c(0,"router-outlet")},dependencies:[h,oe]})};var D=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=b({type:n,selectors:[["app-favoris"]],standalone:!0,features:[y],decls:31,vars:0,consts:[[1,"m-5","text-start"],[1,"favorites-container"],[1,"favorite-card"],[1,"card-header"],[1,"fas","fa-store","me-2"],[1,"fas","fa-heart","icon-fav"],[1,"card-description"],[1,"card-footer"],["onmouseover","this.style.background='linear-gradient(135deg, #ffc107, #6d5203)'","onmouseout","this.style.background='linear-gradient(135deg, #6d5203, #ffc107)'",1,"btn"],[1,"fas","fa-utensils","me-2"]],template:function(e,t){e&1&&(c(0,"app-header"),o(1,"section")(2,"h1",0),s(3,"Mes Favoris"),r(),o(4,"div",1)(5,"div",2)(6,"div",3)(7,"h3"),c(8,"i",4),s(9," Boutique Omega"),r(),c(10,"i",5),r(),o(11,"div",6),s(12," Sp\xE9cialiste en v\xEAtements de luxe pour hommes. Situ\xE9 \xE0 Abidjan, Cocody Angr\xE9. "),r(),o(13,"div",7)(14,"button",8),s(15,"Voir"),r(),o(16,"button",8),s(17,"Retirer"),r()()(),o(18,"div",2)(19,"div",3)(20,"h3"),c(21,"i",9),s(22," Chicken Palace"),r(),c(23,"i",5),r(),o(24,"div",6),s(25," Restaurant sp\xE9cialis\xE9 en poulet brais\xE9. Livraison rapide \xE0 domicile. "),r(),o(26,"div",7)(27,"button",8),s(28,"Voir"),r(),o(29,"button",8),s(30,"Retirer"),r()()()()())},dependencies:[O,C,h,N]})};var je=n=>({active:n});function De(n,i){if(n&1){let e=v();o(0,"div",12)(1,"div",13)(2,"button",14),p("click",function(){let a=g(e).$implicit,m=u(3);return _(m.toggleFavorite(a))}),c(3,"i",15),r(),o(4,"div",16)(5,"div",17)(6,"div",18)(7,"h5",19),s(8),r(),o(9,"div",20)(10,"p",21)(11,"small"),s(12,"Categorie :"),r(),s(13),r(),o(14,"div",22)(15,"button",23),p("click",function(){let a=g(e).$implicit,m=u(3);return _(m.readSingleBusiness(a.bu_uid))}),c(16,"i",24),s(17," Voir "),r()()()()()()()()}if(n&2){let e=i.$implicit,t=u(3);l(2),d("ngClass",I(4,je,t.isFavorite(e))),l(),d("ngClass",t.isFavorite(e)?"fa-heart":"fa-heart-broken"),l(5),S(e.bu_name),l(5),w(" ",e.bu_categorie," ")}}function ze(n,i){if(n&1&&($(0),f(1,De,18,6,"div",11),G()),n&2){let e=u(2);l(),d("ngForOf",e.favs_List.slice(0,e.visibleCount))}}function qe(n,i){n&1&&(o(0,"div",25),c(1,"i",26)(2,"br"),s(3," Aucun favori trouv\xE9. "),r())}function Ue(n,i){if(n&1&&(o(0,"div",9),f(1,ze,2,1,"ng-container",10)(2,qe,4,0,"ng-template",null,0,K),r()),n&2){let e=W(3),t=u();l(),d("ngIf",t.favs_List.length>0)("ngIfElse",e)}}function Je(n,i){if(n&1){let e=v();o(0,"div",29)(1,"div",30)(2,"h5",31),c(3,"i",32),s(4),r(),o(5,"small"),s(6),c(7,"i",33),r()(),o(8,"p",34),s(9),r(),o(10,"div",35)(11,"button",36),p("click",function(){let a=g(e).$implicit,m=u(3);return _(m.deleteHistorique(a.h_uid))}),c(12,"i",37),r(),o(13,"button",38),p("click",function(){let a=g(e).$implicit,m=u(3);return _(m.readSingleBusiness(a.bu_uid))}),c(14,"i",39),r()()()}if(n&2){let e=i.$implicit;l(4),w(" ",e.bu_name," "),l(2),w(" ",e.visited_at," "),l(3),S(e.bu_description)}}function $e(n,i){if(n&1&&($(0),f(1,Je,15,3,"div",28),G()),n&2){let e=u(2);l(),d("ngForOf",e.histo_List)}}function Ge(n,i){n&1&&(o(0,"div",40),c(1,"i",41),o(2,"p"),s(3,"Aucun historique disponible pour le moment."),r()())}function We(n,i){if(n&1&&(o(0,"div",27),f(1,$e,2,1,"ng-container",10)(2,Ge,4,0,"ng-template",null,1,K),r()),n&2){let e=W(3),t=u();l(),d("ngIf",t.histo_List.length>0)("ngIfElse",e)}}function Ke(n,i){n&1&&(o(0,"div",42)(1,"div",43)(2,"span",44),s(3,"Chargement..."),r()()())}var z=class n{constructor(i,e){this.router=i;this.http=e}favs_List=[];histo_List=[];user_infos;user_id;bu_name;businessList=[];favoriteList=[];loading=!1;isLoading=!1;currentTab="favoris";readAllFavorisByUser(){this.loading=!0;let i={user_id:this.user_id};this.http.ReadAllFavorisByUser(i).subscribe({next:e=>{console.log("response favs_List:",e),e?.status==="success"&&Array.isArray(e.favs_informations)?setTimeout(()=>{this.loading=!1,this.favs_List=e.favs_informations},1e3):this.favs_List=[]},error:e=>{console.error("Erreur lors du chargement :",e),this.favs_List=[]}})}readAllHistoriqueByUser(){this.loading=!0;let i={user_id:this.user_id};this.http.ReadAllHistoriqueByUser(i).subscribe({next:e=>{e?.status==="success"?(this.histo_List=e.histo_informations,this.bu_name=e.histo_informations.bu_name,console.log("histo_List:",this.histo_List),console.log("bu_name:",this.bu_name),setTimeout(()=>{this.loading=!1,this.histo_List=e.histo_informations},2e3)):this.histo_List=[]},error:e=>{console.error("Erreur lors du chargement :",e),this.histo_List=[]}})}readSingleBusiness(i){this.router.navigate(["/user/business/readsingle-business",i])}visibleCount=6;get visibleBusinessList(){return this.businessList.slice(0,this.visibleCount)}isFavorite(i){return i.is_favs===1}toggleFavorite(i){this.favoriteList=this.businessList.filter(t=>t.is_favs===1);let e=this.businessList.findIndex(t=>t.bu_uid===i.bu_uid);e>-1&&(this.businessList[e].is_favs=this.businessList[e].is_favs===1?0:1,this.favoriteList=this.businessList.filter(t=>t.is_favs===1),sessionStorage.setItem("businessList",JSON.stringify(this.businessList)),this.businessList[e].is_favs===1?this.saveFavoris(this.businessList[e]):this.deleteFavoris(this.businessList[e])),window.location.reload()}saveFavoris(i){let e=k(E({},i),{user_id:this.user_id});console.log("payload:",e),this.http.SaveFavoris(e).subscribe({next:t=>{console.log("Response:",t.status)},error:t=>{console.error("Erreur lors de la recherche :",t),this.favoriteList=[]}})}deleteFavoris(i){let e=k(E({},i),{user_id:this.user_id});console.log("payload:",e),this.http.DeleteFavoris(e).subscribe({next:t=>{console.log("Response:",t)},error:t=>{console.error("Erreur lors de la recherche :",t),this.favoriteList=[]}})}deleteHistorique(i){this.isLoading=!0;let e={h_uid:i};this.http.DeleteHistoriques(e).subscribe({next:t=>{this.isLoading=!1,t?.status==="success"&&(console.log("success:"),window.location.reload())},error:t=>{this.isLoading=!1}})}ngOnInit(){let i=sessionStorage.getItem("user_infos");this.user_infos=i,console.log(this.user_infos),i&&(this.user_infos=JSON.parse(i),this.user_id=this.user_infos.u_uid,console.log("user_id:",this.user_id),this.readAllFavorisByUser(),this.readAllHistoriqueByUser());let e=JSON.parse(sessionStorage.getItem("businessList")||"null");e?(console.log("Business infos trouv\xE9 en session:",e),this.businessList=e):console.warn("Aucun Business trouv\xE9 dans sessionStorage")}static \u0275fac=function(e){return new(e||n)(x(B),x(M))};static \u0275cmp=b({type:n,selectors:[["app-activites"]],standalone:!0,features:[y],decls:11,vars:7,consts:[["noFavorites",""],["noHistory",""],[1,"activity-container"],[1,"activity-tabs"],[1,"tab-btn",3,"click"],[1,"activity-content"],["class","favorites-container",4,"ngIf"],["class","history-container",4,"ngIf"],["class","loading-overlay",4,"ngIf"],[1,"favorites-container"],[4,"ngIf","ngIfElse"],["class","col-md-6",4,"ngFor","ngForOf"],[1,"col-md-6"],[1,"card","mb-3","position-relative"],["title","Ajouter aux favoris",1,"btn","btn-fav",3,"click","ngClass"],[1,"fas",3,"ngClass"],[1,"row","g-0"],[1,"col-md-12"],[1,"card-body"],[1,"card-title","fw-bold","text-black"],[1,"d-flex"],[1,"card-text","m-0","col-md-10"],[1,"mt-3","text-end"],["type","button","onmouseover","this.style.background='linear-gradient(135deg, #ffc107, #6d5203)'","onmouseout","this.style.background='linear-gradient(135deg, #6d5203, #ffc107)'",1,"btn","btn-sm","d-inline-flex","align-items-center","gap-2","rounded-pill","shadow","viewbusiness",3,"click"],[1,"bi","bi-eye-fill",2,"font-size","1rem"],[1,"text-center","mt-4","text-muted"],[1,"fas","fa-heart-broken","fa-2x","mb-2"],[1,"history-container"],["class","history-card card shadow-sm mb-4 p-3 rounded-4 border-0",4,"ngFor","ngForOf"],[1,"history-card","card","shadow-sm","mb-4","p-3","rounded-4","border-0"],[1,"d-flex","justify-content-between","align-items-center","mb-2"],[1,"mb-0","fw-bold","text-dark"],[1,"fas","fa-history","me-2","text-primary"],[1,"fas","fa-clock","text-muted"],[1,"text-muted","mb-1"],[1,"d-flex","justify-content-end","gap-2"],["type","button",1,"btn","btn-outline-danger","btn-sm","rounded-pill","shadow-sm","px-3",3,"click"],[1,"bi","bi-trash-fill"],["type","button",1,"btn","btn-sm","rounded-pill","shadow-sm","px-3","show",3,"click"],[1,"bi","bi-eye-fill"],[1,"text-center","mt-5","text-muted"],[1,"fas","fa-history","fa-2x","mb-3","d-block"],[1,"loading-overlay"],["role","status",1,"spinner-border","text-light"],[1,"visually-hidden"]],template:function(e,t){e&1&&(c(0,"app-header"),o(1,"div",2)(2,"div",3)(3,"button",4),p("click",function(){return t.currentTab="favoris"}),s(4,"Favoris"),r(),o(5,"button",4),p("click",function(){return t.currentTab="historique"}),s(6,"Historique"),r()(),o(7,"div",5),f(8,Ue,4,2,"div",6),r(),f(9,We,4,2,"div",7)(10,Ke,4,0,"div",8),r()),e&2&&(l(3),J("active",t.currentTab==="favoris"),l(2),J("active",t.currentTab==="historique"),l(3),d("ngIf",t.currentTab==="favoris"),l(),d("ngIf",t.currentTab==="historique"),l(),d("ngIf",t.loading))},dependencies:[O,C,L,H,V,h,N],styles:[".activity-container[_ngcontent-%COMP%]{max-width:1000px;margin:40px auto;font-family:Segoe UI,sans-serif;padding:20px;background:#f7f9fc;color:#000;border-radius:12px;box-shadow:0 4px 12px #0000001a}.activity-tabs[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:30px}.activity-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent;border:none;padding:12px 30px;margin:0 15px;font-weight:700;font-size:16px;cursor:pointer;color:#333;border-bottom:3px solid transparent;transition:.3s ease}.activity-tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{border-bottom:3px solid #ffc107;color:#ffc107}.favorites-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.favorite-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #ddd;border-radius:12px;padding:20px;box-shadow:0 2px 8px #0000000d;transition:box-shadow .3s ease}.favorite-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #0000001a}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px}.card-description[_ngcontent-%COMP%]{font-size:15px;color:#555;margin-bottom:15px}.card-footer[_ngcontent-%COMP%]{display:flex;gap:10px}.loading-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#21252980;z-index:9999;display:flex;align-items:center;justify-content:center}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.viewbusiness[_ngcontent-%COMP%]{background:linear-gradient(to right,#0f2027,#203a43,#2c5364);color:#fff;padding:.2rem .5rem;font-weight:500;transition:all .3s ease;border:0}.btn-fav[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;background:#fff;color:#2c5364;border:none;font-size:1.3rem;z-index:10;border-radius:50%;padding:6px 10px;box-shadow:0 2px 6px #0000001a;transition:transform .2s ease}.btn-fav[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.btn-fav.active[_ngcontent-%COMP%]{color:#ffc107}.activity-tabs[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;background:transparent;font-weight:700;color:#666;border-bottom:2px solid transparent;transition:all .3s ease}.activity-tabs[_ngcontent-%COMP%]   .tab-btn.active[_ngcontent-%COMP%]{border-color:#ffc107;color:#000}.btn.viewbusiness[_ngcontent-%COMP%], .show[_ngcontent-%COMP%]{background:linear-gradient(to right,#0f2027,#203a43,#2c5364);color:#fff;transition:background .3s ease}.btn.viewbusiness[_ngcontent-%COMP%]:hover, .show[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#ffc107,#6d5203)}.btn-danger-hover[_ngcontent-%COMP%]{background:linear-gradient(135deg,#a71d2a,#dc3545)}.btn-danger-hover[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#dc3545,#a71d2a)}"]})};var Qe=[{path:"",component:j,children:[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:R},{path:"activites",component:z},{path:"favoris",component:D},{path:"business",loadChildren:()=>import("./chunk-VJIEKHWI.js").then(n=>n.BusinessModule)}]}],q=class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=T({type:n});static \u0275inj=P({imports:[h.forChild(Qe),h]})};var be=class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=T({type:n});static \u0275inj=P({imports:[C,q]})};export{be as UserModule};
