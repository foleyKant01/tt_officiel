<header class="page-header py-3 header" style="background: linear-gradient(to right, #0f2027, #203a43, #2c5364);">
  <div class="container-fluid">
    <div class="row align-items-center text-white">

      <!-- Ligne du logo + icône profil (mobile) -->
      <div class="col-12 d-flex justify-content-between align-items-center mb-3 d-md-none">
        <div [routerLink]="['/user/home']" class="d-flex align-items-center logo logo-group">
          <h3 class="mb-0 me-2 logo-title">Coocle Search</h3>
          <i class="fas fa-laugh-wink logo-icon" style="transform: rotate(-30deg); color: white;"></i>
        </div>
        <div>
          <a *ngIf="!isLoggedIn" class="text-white me-3" [routerLink]="['/auth/login/']"
            style="text-decoration: underline;">Connexion</a>

          <button *ngIf="user_infos" class="btn text-white p-0 position-relative" type="button" (click)="toggleProfileMenu()">
            <i class="bi bi-person-circle fs-4"></i>
          </button>
          <div *ngIf="profileMenuVisible" class="dropdown-menu show" style="right: 0; top: 3.5rem; position: absolute;">
            <a class="dropdown-item d-flex align-items-center gap-2" [routerLink]="['/profil']">
              <i class="bi bi-person-fill"></i> Profil
            </a>
            <a class="dropdown-item d-flex align-items-center gap-2" [routerLink]="['/historique']">
              <i class="bi bi-clock-history"></i> Historiques
            </a>
            <a class="dropdown-item d-flex align-items-center gap-2" [routerLink]="['/user/favoris']">
              <i class="bi bi-star-fill"></i> Favoris
            </a>
          </div>
        </div>
      </div>

      <!-- Barre de recherche (mobile) -->
      <div class="col-12 mb-3 d-md-none">
        <form class="form-subscribe" id="contactForm" [formGroup]="search_form" (ngSubmit)="Searchbusiness()">
          <div class="input-group shadow-sm" style="height: 45px;">
            <input class="form-control border-0 rounded-start-pill" style="height: 100%;" formControlName="textSearch"
              id="textSearch" type="text" placeholder="Tapez ici pour rechercher..." />
            <button class="btn btn-warning border-0 rounded-end-pill px-4" type="submit" style="height: 100%;"
              [disabled]="search_form.get('textSearch')?.invalid || search_form.get('textSearch')?.value.trim() === ''">
              Search
            </button>
          </div>
        </form>
      </div>

      <!-- Version desktop : logo, recherche, profil à droite -->
      <div [routerLink]="['/user/home']" class="col-md-4 logo d-none d-md-flex align-items-center justify-content-start text-white">
        <h2 class="mb-0 me-2">Coocle Search</h2>
        <i class="fas fa-laugh-wink fa-2x" style="transform: rotate(-30deg); color: white;"></i>
      </div>

      <div class="col-md-5 d-none d-md-block tablet-adjust">
        <form class="form-subscribe " id="contactForm" [formGroup]="search_form" (ngSubmit)="Searchbusiness()">
          <div class="input-group shadow-sm" style="height: 45px;">
            <input class="form-control border-0 rounded-start-pill" style="height: 100%;" formControlName="textSearch"
              id="textSearch" type="text" placeholder="Tapez ici pour rechercher..." />
            <button class="btn btn-warning border-0 rounded-end-pill px-4" type="submit" style="height: 100%;"
              [disabled]="search_form.get('textSearch')?.invalid || search_form.get('textSearch')?.value.trim() === ''">
              Search
            </button>
          </div>
        </form>
      </div>

      <div class="col-md-3 d-none d-md-flex justify-content-end align-items-center text-white">
        <a *ngIf="!isLoggedIn" class="me-3 text-white" [routerLink]="['/auth/login/']"
          style="text-decoration: underline;">Connexion</a>
        <div *ngIf="user_infos" class="position-relative">
          <button class="btn text-white p-0 position-relative" style="margin-left: 0.5rem;" type="button"
            (click)="toggleProfileMenu()">
            <i class="bi bi-person-circle fs-4"></i>
          </button>
          <div *ngIf="profileMenuVisible" class="dropdown-menu show" style="right: 0; top: 3.5rem; position: absolute;">
            <a class="dropdown-item d-flex align-items-center gap-2" [routerLink]="['/profil']">
              <i class="bi bi-person-fill"></i> Profil
            </a>
            <a class="dropdown-item d-flex align-items-center gap-2" [routerLink]="['/historique']">
              <i class="bi bi-clock-history"></i> Historiques
            </a>
            <a class="dropdown-item d-flex align-items-center gap-2" [routerLink]="['/favoris']">
              <i class="bi bi-star-fill"></i> Favoris
            </a>
          </div>
        </div>
      </div>

    </div>
  </div>
</header>
