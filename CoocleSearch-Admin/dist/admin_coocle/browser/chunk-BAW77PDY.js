import{a as de}from"./chunk-B4OSCESV.js";import{a as F}from"./chunk-ZQQT67LY.js";import{a as ee}from"./chunk-B36LCUYC.js";import{a as $,b as d,c as H,d as L,e as R,f as u,g as U,h as J,i as K,j as Q,k as W,l as X,n as Y,o as Z,p as I}from"./chunk-XLSRIXBF.js";import{$ as w,A as f,E as C,G as m,I as n,J as s,K as l,L as A,M as _,N,O as r,P as h,Q as G,S as x,aa as B,ba as b,ca as D,d as me,ga as z,ha as M,k as P,ka as g,l as E,n as O,p as c,q as S,t as j,u as q,y as V,z as a}from"./chunk-7P4KE5VM.js";var ie=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=c({type:i,selectors:[["app-business"]],standalone:!0,features:[x],decls:1,vars:0,template:function(t,o){t&1&&l(0,"router-outlet")},dependencies:[g,z,Z,b]})}}return i})();var T=me(de());var k=(()=>{class i{constructor(e,t){this.api=e,this.http=t,this.api_url=ee.apiUrl}CreateBusiness(e){return this.http.post(this.api_url+"/api/business/createbusiness",e)}ReadAllBusiness(){return this.api.get(this.api_url+"/api/business/readallbusiness")}ReadAllBusinessByCategories(e){return this.http.post(this.api_url+"/api/business/readsinglebusinessbycategories",e)}ReadSingleBusiness(e){return this.http.post(this.api_url+"/api/business/readsinglebusiness",e)}DeleteBusiness(e){return this.http.post(this.api_url+"/api/business/deletebusiness",e)}static{this.\u0275fac=function(t){return new(t||i)(O(D),O(D))}}static{this.\u0275prov=P({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function fe(i,p){if(i&1&&(n(0,"option",32),r(1),s()),i&2){let e=p.$implicit;m("value",e),a(),h(e)}}function ge(i,p){i&1&&(n(0,"div",33)(1,"small"),r(2,"Pour une g\xE9olocalisation pr\xE9cise, veuillez \xEAtre pr\xE9sent sur le site de l\u2019entit\xE9 au moment de sa cr\xE9ation."),s()())}function he(i,p){i&1&&(n(0,"div",6)(1,"label",34),r(2,"Ville "),n(3,"span",8),r(4,"*"),s()(),l(5,"input",35),s())}function be(i,p){i&1&&(n(0,"div",6)(1,"label",36),r(2,"Adresse "),n(3,"span",8),r(4,"*"),s()(),l(5,"input",37),s())}var se=(()=>{class i{ngOnInit(){this.loadCategories()}constructor(e,t,o,y){this.router=e,this.fb=t,this.http=o,this.api=y,this.data=[],this.allBusiness=[],this.loading=!1,this.delayDuration=2e3,this.success=!1,this.allCategories=[],this.createbusiness=new R({categorie:new u(null,d.required),type:new u(null,d.required),name:new u(null,d.required),description:new u(null,d.required),email:new u(null,d.required),city:new u(null),address:new u(null),phone:new u(null,d.required),bu_picture:new u(null,d.required),t_uid:new u(null,d.required),latitude:new u(null,d.required),longitude:new u(null,d.required)})}get typeValue(){return this.createbusiness.get("type")?.value}loadCategories(){this.api.ReadAllCategories()?.subscribe({next:e=>{this.data=e?.categorie_name,this.allCategories=this.data.map(t=>t?.name),console.log(this.allCategories)}})}Createbusiness(){if(this.createbusiness.valid){this.loading=!0;let e=new FormData;e.append("categorie",this.createbusiness.get("categorie")?.value),e.append("type",this.createbusiness.get("type")?.value),e.append("name",this.createbusiness.get("name")?.value),e.append("description",this.createbusiness.get("description")?.value),e.append("email",this.createbusiness.get("email")?.value),e.append("city",this.createbusiness.get("city")?.value),e.append("address",this.createbusiness.get("address")?.value),e.append("phone",this.createbusiness.get("phone")?.value),e.append("bu_picture",this.file),e.append("t_uid",this.createbusiness.get("t_uid")?.value),e.append("latitude",this.createbusiness.get("latitude")?.value),e.append("longitude",this.createbusiness.get("longitude")?.value),this.http.CreateBusiness(e).subscribe({next:t=>{console.log(t),t?.status==="success"?(this.data=t,T.default.fire({title:"Succ\xE8s !",text:"L'entit\xE9 a \xE9t\xE9 cr\xE9\xE9e avec succ\xE8s !",icon:"success",confirmButtonText:"OK",confirmButtonColor:"#dda706"}).then(()=>{window.location.reload()})):T.default.fire({title:"Erreur !",text:t?.error_description||"\xC9chec de cr\xE9ation.",icon:"error",confirmButtonText:"R\xE9essayer",confirmButtonColor:"#ff6c2f"})},error:t=>{console.error(t),setTimeout(()=>{this.loading=!1},this.delayDuration)}})}}onFileChange(e){console.log(e);let t=e.target.files[0];return this.file=t,console.log(this.file),t}static{this.\u0275fac=function(t){return new(t||i)(f(M),f(Y),f(k),f(F))}}static{this.\u0275cmp=c({type:i,selectors:[["app-create-business"]],standalone:!0,features:[x],decls:69,vars:6,consts:[[1,"container","my-5","p-5","shadow","bg-white","rounded"],[1,"text-center","mb-4","fw-bold","text-dark"],["enctype","multipart/form-data",1,"row","g-4",3,"ngSubmit","formGroup"],[1,"col-md-6"],[1,"card","p-3","border-0","shadow-sm"],[1,"text-primary"],[1,"form-group","mt-2"],["for","categorie"],[1,"text-danger"],["formControlName","categorie",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],["for","type"],["formControlName","type",1,"form-select"],["value","physique"],["value","en-ligne"],["for","name"],["type","text","formControlName","name","id","name",1,"form-control"],["for","description"],["formControlName","description","id","description","rows","3",1,"form-control"],["for","email"],["type","email","formControlName","email","id","email",1,"form-control"],[1,"form-check","mt-3"],["type","checkbox","id","terms",1,"form-check-input"],["for","terms",1,"form-check-label"],["class","form-check p-0 alert alert-warning text-dark mt-3","role","alert",4,"ngIf"],["class","form-group mt-2",4,"ngIf"],["for","phone"],["type","text","formControlName","phone","id","phone",1,"form-control"],["for","bu_picture"],["type","file","formControlName","bu_picture","id","bu_picture",1,"form-control",3,"change"],[1,"col-12","text-center","mt-4"],["type","submit",1,"btn","btn-warning","px-5","py-2","rounded-pill","shadow",3,"disabled"],[3,"value"],["role","alert",1,"form-check","p-0","alert","alert-warning","text-dark","mt-3"],["for","city"],["type","text","formControlName","city","id","city",1,"form-control"],["for","address"],["type","text","formControlName","address","id","address",1,"form-control"]],template:function(t,o){t&1&&(n(0,"div",0)(1,"h2",1),r(2,"Cr\xE9er une Entit\xE9"),s(),n(3,"form",2),_("ngSubmit",function(){return o.Createbusiness()}),n(4,"div",3)(5,"div",4)(6,"h5",5),r(7,"Informations G\xE9n\xE9rales"),s(),n(8,"div",6)(9,"label",7),r(10,"Cat\xE9gorie "),n(11,"span",8),r(12,"*"),s()(),n(13,"select",9),C(14,fe,2,2,"option",10),s()(),n(15,"div",6)(16,"label",11),r(17,"Type "),n(18,"span",8),r(19,"*"),s()(),n(20,"select",12)(21,"option",13),r(22,"Physique"),s(),n(23,"option",14),r(24,"En ligne"),s()()(),n(25,"div",6)(26,"label",15),r(27,"Nom de l'entit\xE9 "),n(28,"span",8),r(29,"*"),s()(),l(30,"input",16),s(),n(31,"div",6)(32,"label",17),r(33,"Description "),n(34,"span",8),r(35,"*"),s()(),l(36,"textarea",18),s(),n(37,"div",6)(38,"label",19),r(39,"Email "),n(40,"span",8),r(41,"*"),s()(),l(42,"input",20),s(),n(43,"div",21),l(44,"input",22),n(45,"label",23),r(46," J'accepte les conditions g\xE9n\xE9rales d'utilisation "),s()()()(),n(47,"div",3)(48,"div",4)(49,"h5",5),r(50,"Localisation & Visuels"),s(),C(51,ge,3,0,"div",24)(52,he,6,0,"div",25)(53,be,6,0,"div",25),n(54,"div",6)(55,"label",26),r(56,"T\xE9l\xE9phone "),n(57,"span",8),r(58,"*"),s()(),l(59,"input",27),s(),n(60,"div",6)(61,"label",28),r(62,"Picture "),n(63,"span",8),r(64,"*"),s()(),n(65,"input",29),_("change",function(ue){return o.onFileChange(ue)}),s()()()(),n(66,"div",30)(67,"button",31),r(68,"Cr\xE9er l'entit\xE9"),s()()()()),t&2&&(a(3),m("formGroup",o.createbusiness),a(11),m("ngForOf",o.allCategories),a(37),m("ngIf",o.typeValue==="physique"),a(),m("ngIf",o.typeValue==="physique"),a(),m("ngIf",o.typeValue==="physique"),a(14),m("disabled",o.createbusiness.invalid))},dependencies:[g,b,w,B,I,U,W,X,$,Q,H,L,J,K],styles:["input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{color:#000!important}label[_ngcontent-%COMP%]{color:#444;font-weight:500}.card[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin-bottom:1rem;font-weight:600}.btn-warning[_ngcontent-%COMP%]{background:linear-gradient(to right,#a37b04,#dda706);border:none;color:#fff}.btn-warning[_ngcontent-%COMP%]:hover{background:linear-gradient(to right,#203a43,#396679)}.btn-outline-dark[_ngcontent-%COMP%]:hover{background-color:#333;color:#fff}"]})}}return i})();function ve(i,p){if(i&1){let e=A();n(0,"tr")(1,"td",13),r(2),s(),n(3,"td"),l(4,"img",14),s(),n(5,"td",15),r(6),s(),n(7,"td"),r(8),s(),n(9,"td"),r(10),s(),n(11,"td"),r(12),s(),n(13,"td",11)(14,"button",16),_("click",function(){let o=j(e).$implicit,y=N(2);return q(y.Readsinglebusiness(o.bu_uid))}),l(15,"i",17),s()()()}if(i&2){let e=p.$implicit,t=p.index;a(2),h(t+1),a(2),m("src",e.bu_picture||"assets/img/default.jpg",V),a(2),h(e==null?null:e.bu_name),a(2),h(e==null?null:e.bu_categorie),a(2),h(e==null?null:e.bu_type),a(2),h(e==null?null:e.bu_city)}}function Ce(i,p){if(i&1&&(n(0,"table",9)(1,"thead",10)(2,"tr")(3,"th"),r(4,"#"),s(),n(5,"th"),r(6,"Image"),s(),n(7,"th"),r(8,"Nom"),s(),n(9,"th"),r(10,"Cat\xE9gorie"),s(),n(11,"th"),r(12,"Type"),s(),n(13,"th"),r(14,"Ville"),s(),n(15,"th",11),r(16,"Action"),s()()(),n(17,"tbody"),C(18,ve,16,6,"tr",12),s()()),i&2){let e=N();a(18),m("ngForOf",e.dataBusiness)}}function xe(i,p){i&1&&(n(0,"div",18),l(1,"i",19),n(2,"p",20),r(3,"Aucune entit\xE9 disponible pour le moment."),s()())}var re=(()=>{class i{constructor(e,t,o){this.router=e,this.http=t,this.api=o,this.business=[],this.dataCategorie=[],this.deleteResult=[],this.allBusiness=[],this.allCategories=[],this.searchbusiness=new R({bu_categorie:new u(null,d.required)})}ngOnInit(){this.Readallbusiness(),this.loadCategories()}Readallbusiness(){this.http.ReadAllBusiness().subscribe({next:e=>{this.allBusiness=e||[],e?.business&&(this.dataBusiness=e?.business)}})}Readsinglebusiness(e){this.router.navigate(["/teller/business/readsingle-business",e])}loadCategories(){this.api.ReadAllCategories()?.subscribe({next:e=>{this.dataCategorie=e?.categorie_name,this.allCategories=this.dataCategorie.map(t=>t?.name)}})}Readallbusinessbycategories(){let e=this.searchbusiness?.value;this.http.ReadAllBusinessByCategories(this.searchbusiness.value).subscribe({next:t=>{this.allBusiness=t||[],t?.business&&(this.dataBusiness=t?.business)}})}Readsingleproducts(e){this.router.navigate(["/admin/business/edit-business",e])}Deleteproduct(e){console.log(e),confirm("\xCAtes-vous s\xFBr de vouloir supprimer ce produit ?")&&this.http.DeleteBusiness(e).subscribe({next:t=>{console.log("Product deleted successfully:",t),this.deleteResult=t?.status,console.log(this.deleteResult)},error:t=>{console.error("Failed to delete product:",t)}})}static{this.\u0275fac=function(t){return new(t||i)(f(M),f(k),f(F))}}static{this.\u0275cmp=c({type:i,selectors:[["app-readall-business"]],standalone:!0,features:[x],decls:11,vars:3,consts:[[1,"container","mt-5"],[1,"card","shadow-sm","border-0","rounded-4","p-4"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"fw-bold","text-dark","m-0"],[1,"bi","bi-building","me-2","text-primary"],[1,"badge","bg-warning","text-dark","fs-6","px-3","py-2","rounded-pill","shadow-sm"],[1,"table-responsive"],["class","table table-hover align-middle",4,"ngIf"],["class","text-center py-5 text-muted",4,"ngIf"],[1,"table","table-hover","align-middle"],[1,"table-light","text-dark"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"fw-semibold"],["alt","",1,"img-fluid","rounded-circle","object-fit-cover",2,"height","35px","width","35px",3,"src"],[1,"fw-semibold","text-dark"],["title","Voir les d\xE9tails",1,"btn","show","btn-sm","btn-outline-primary","rounded-circle","shadow-sm",3,"click"],[1,"bi","bi-eye-fill"],[1,"text-center","py-5","text-muted"],[1,"bi","bi-info-circle","fs-2","mb-2"],[1,"m-0"]],template:function(t,o){t&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4",3),l(4,"i",4),r(5," Mes Entit\xE9s "),s(),n(6,"span",5),r(7),s()(),n(8,"div",6),C(9,Ce,19,1,"table",7)(10,xe,4,0,"div",8),s()()()),t&2&&(a(7),G(" Total : ",(o.dataBusiness==null?null:o.dataBusiness.length)||0," "),a(2),m("ngIf",o.dataBusiness&&o.dataBusiness.length>0),a(),m("ngIf",o.dataBusiness.length===0))},dependencies:[g,b,w,B,I],styles:["table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{white-space:nowrap}.badge[_ngcontent-%COMP%]{font-size:1rem}.btn-outline-primary[_ngcontent-%COMP%]:hover{background-color:#0d6efd;color:#fff;border-color:#0d6efd}.show[_ngcontent-%COMP%]{background:linear-gradient(to right,#a37b04,#dda706);border:0px;color:#fff;transition:background .3s ease}.show[_ngcontent-%COMP%]:hover{background:linear-gradient(to right,#203a43,#396679)}"]})}}return i})();var oe=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=c({type:i,selectors:[["app-readsingle-business"]],decls:2,vars:0,template:function(t,o){t&1&&(n(0,"p"),r(1,"readsingle-business works!"),s())}})}}return i})();var ae=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=c({type:i,selectors:[["app-delete-business"]],decls:2,vars:0,template:function(t,o){t&1&&(n(0,"p"),r(1,"delete-business works!"),s())}})}}return i})();var ye=[{path:"",component:ie,children:[{path:"",redirectTo:"create-business",pathMatch:"full"},{path:"create-business",component:se},{path:"readall-business",component:re},{path:"edit-business/:bu_uid",component:oe},{path:"delete-business/:bu_uid",component:ae}]}],le=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=S({type:i})}static{this.\u0275inj=E({imports:[g.forChild(ye),g]})}}return i})();var Ke=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=S({type:i})}static{this.\u0275inj=E({imports:[b,le]})}}return i})();export{Ke as BusinessModule};
