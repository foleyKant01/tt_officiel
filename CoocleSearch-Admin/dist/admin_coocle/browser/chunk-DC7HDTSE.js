import{a as I}from"./chunk-B4OSCESV.js";import{a as P}from"./chunk-JIFFHIWT.js";import"./chunk-B36LCUYC.js";import{a as _,b as f,c as y,d as x,e as S,f as u,g as E,h as M,i as k,p as N}from"./chunk-XLSRIXBF.js";import{A as c,G as m,I as t,J as r,K as n,M as v,O as s,S as g,T as b,ba as h,d as T,fa as V,ga as q,ha as w,ia as C,ka as d,l as O,p,q as A,z as l}from"./chunk-7P4KE5VM.js";var z=(()=>{class o{static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275cmp=p({type:o,selectors:[["app-auth"]],standalone:!0,features:[g],decls:1,vars:0,template:function(e,a){e&1&&n(0,"router-outlet")},dependencies:[d,q]})}}return o})();var L=T(I());var Q=()=>["/auth/forgot-password"],J=(()=>{class o{constructor(i,e){this.router=i,this.auth=e,this.is_loading=!1,this.login_form=new S({identifiant:new u(null,f.required),ad_password:new u(null,f.required)})}Loginadmin(){this.is_loading=!0;let i=this.login_form?.value;this.auth.LoginAdmin(i).subscribe({next:e=>{console.log("Response:",e),e?.status==="success"?(this.data=e,e.admin_infos?sessionStorage.setItem("admin_infos",JSON.stringify(e.admin_infos)):console.error("admin_infos is missing in the response"),sessionStorage.setItem("access_token",e.access_token),L.default.fire({title:"Success!",text:"Admin login successfully!",icon:"success",confirmButtonText:"OK",confirmButtonColor:"#ff6c2f"}).then(()=>{this.router.navigate(["/admin/dashboard"])})):(L.default.fire({title:"Error!",text:e?.message||"Login failed",icon:"error",confirmButtonText:"Try Again",confirmButtonColor:"#ff6c2f"}),this.is_loading=!1)},error:e=>{console.log("Error:",e),L.default.fire({title:"Error!",text:e.error_description||"An error occurred",icon:"error",confirmButtonText:"Try Again",confirmButtonColor:"#ff6c2f"}),this.is_loading=!1},complete:()=>{console.log("Request complete"),this.is_loading=!1}})}ngOnInit(){}static{this.\u0275fac=function(e){return new(e||o)(c(w),c(P))}}static{this.\u0275cmp=p({type:o,selectors:[["app-login"]],standalone:!0,features:[g],decls:43,vars:4,consts:[[1,"container","pt-5"],[1,"row","border","justify-content-center"],[1,"col-xl-10","col-lg-12","col-md-9"],[1,"card","o-hidden","border-0","shadow-lg","my-5"],[1,"card-body","p-0"],[1,"row"],[1,"col-lg-6","d-none","p-0","m-0","d-lg-block"],[1,"semi-div1"],[1,"sidebar-brand-icon","col-lg-4","semi1-petit1","rotate-n-15"],[1,"fas","fa-laugh-wink"],[1,"sidebar-brand-text","col-lg-8","p-0","semi1-petit2","mx-3"],[1,"col-lg-6"],[1,"p-5"],[1,"text-center"],[1,"h4","text-gray-900","mb-4"],[1,"user",3,"submit","formGroup"],[1,"form-group"],["type","email","formControlName","identifiant","id","exampleInputEmail","aria-describedby","emailHelp","placeholder","Enter Email Address or Username...",1,"form-control","form-control-user"],["type","password","formControlName","ad_password","id","exampleInputPassword","placeholder","Password",1,"form-control","form-control-user"],[1,"custom-control","custom-checkbox","small"],["type","checkbox","id","customCheck",1,"custom-control-input"],["for","customCheck",1,"custom-control-label"],[1,"btn","btn-primary","btn-user","btn-block",3,"disabled"],["href","#",1,"btn","btn-google","btn-user","btn-block"],[1,"fab","fa-google","fa-fw"],["href","#",1,"btn","btn-facebook","btn-user","btn-block"],[1,"fab","fa-facebook-f","fa-fw"],[1,"small",3,"routerLink"]],template:function(e,a){e&1&&(t(0,"div",0),n(1,"br"),t(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8),n(10,"i",9),r(),t(11,"div",10)(12,"h2")(13,"b"),s(14,"COOCLE SEARCH"),r()()()()(),t(15,"div",11)(16,"div",12)(17,"div",13)(18,"h1",14),s(19,"Welcome Back!"),r()(),t(20,"form",15),v("submit",function(){return a.Loginadmin()}),t(21,"div",16),n(22,"input",17),r(),t(23,"div",16),n(24,"input",18),r(),t(25,"div",16)(26,"div",19),n(27,"input",20),t(28,"label",21),s(29,"Remember Me"),r()()(),t(30,"button",22),s(31," Login "),r(),n(32,"hr"),t(33,"a",23),n(34,"i",24),s(35," Login with Google "),r(),t(36,"a",25),n(37,"i",26),s(38," Login with Facebook "),r()(),n(39,"hr"),t(40,"div",13)(41,"a",27),s(42,"Forgot Password?"),r()()()()()()()()()()),e&2&&(l(20),m("formGroup",a.login_form),l(10),m("disabled",a.login_form.invalid),l(11),m("routerLink",b(3,Q)))},dependencies:[d,C,h,N,E,_,y,x,M,k],styles:[".d-lg-block[_ngcontent-%COMP%]{background:linear-gradient(to bottom right,#0f2027,#203a43,#2c5364)}.sidebar-brand-icon[_ngcontent-%COMP%]{color:#fff;font-size:8rem}.semi-div1[_ngcontent-%COMP%]{margin-top:40%;color:#fff;display:flex;padding:0 0 0 20px;justify-content:space-around}.semi1-petit2[_ngcontent-%COMP%]{display:flex;align-items:center;margin-left:0!important}"]})}}return o})();var B=T(I());var X=()=>["/auth/login"],U=(()=>{class o{constructor(i,e){this.router=i,this.auth=e,this.is_loading=!1,this.forgot_form=new S({email:new u("",[f.required,f.email])})}forgotPassword(){if(this.forgot_form.valid){let i=this.forgot_form?.value;this.auth.ForgotPassword(i).subscribe({next:e=>{console.log("Response:",e),e?.status==="success"?(e.email?sessionStorage.setItem("email",JSON.stringify(e.email)):console.error("Admin_infos is missing in the response"),B.default.fire({title:"Succ\xE8s!",text:"Code de r\xE9initialisation envoy\xE9 avec succ\xE8s!",icon:"success",confirmButtonText:"OK",confirmButtonColor:"#ff6c2f"}).then(()=>{this.router.navigate(["/auth/new-password"])})):(B.default.fire({title:"Error!",text:e?.message||"L'envoye du code de r\xE9initialisation \xE0 echouer",icon:"error",confirmButtonText:"Essayer \xE0 nouveau",confirmButtonColor:"#ff6c2f"}),this.is_loading=!1)},error:e=>{console.log("Error:",e),B.default.fire({title:"Error!",text:e.error_description||"An error occurred",icon:"error",confirmButtonText:"Try Again",confirmButtonColor:"#ff6c2f"}),this.is_loading=!1},complete:()=>{console.log("Request complete"),this.is_loading=!1}})}}ngOnInit(){throw new Error("Method not implemented.")}static{this.\u0275fac=function(e){return new(e||o)(c(w),c(P))}}static{this.\u0275cmp=p({type:o,selectors:[["app-forgot-password"]],standalone:!0,features:[g],decls:31,vars:4,consts:[[1,"container","pt-5"],[1,"row","border","justify-content-center"],[1,"col-xl-10","col-lg-12","col-md-9"],[1,"card","o-hidden","border-0","shadow-lg","my-5"],[1,"card-body","p-0"],[1,"row"],[1,"col-lg-6","d-none","p-0","m-0","d-lg-block"],[1,"semi-div1"],[1,"sidebar-brand-icon","col-lg-4","semi1-petit1","rotate-n-15"],[1,"fas","fa-laugh-wink"],[1,"sidebar-brand-text","col-lg-8","p-0","semi1-petit2","mx-3"],[1,"col-lg-6"],[1,"p-5"],[1,"text-center"],[1,"h4","text-gray-900","mb-4"],[1,"mb-4"],[3,"ngSubmit","formGroup"],[1,"form-group"],["type","email","formControlName","email","placeholder","Entrez votre adresse email...",1,"form-control","form-control-user"],[1,"btn","btn-primary","btn-user","btn-block",3,"disabled"],[1,"small",3,"routerLink"]],template:function(e,a){e&1&&(t(0,"div",0),n(1,"br"),t(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8),n(10,"i",9),r(),t(11,"div",10)(12,"h2")(13,"b"),s(14,"COOCLE SEARCH"),r()()()()(),t(15,"div",11)(16,"div",12)(17,"div",13)(18,"h1",14),s(19,"Mot de passe oubli\xE9 ?"),r(),t(20,"p",15),s(21,"Saisissez votre adresse e-mail pour recevoir un code de r\xE9initialisation."),r()(),t(22,"form",16),v("ngSubmit",function(){return a.forgotPassword()}),t(23,"div",17),n(24,"input",18),r(),t(25,"button",19),s(26," R\xE9initialiser le mot de passe "),r()(),n(27,"hr"),t(28,"div",13)(29,"a",20),s(30,"Retour \xE0 la page de connexion"),r()()()()()()()()()()),e&2&&(l(22),m("formGroup",a.forgot_form),l(3),m("disabled",a.forgot_form.invalid),l(4),m("routerLink",b(3,X)))},dependencies:[d,C,h,N,E,_,y,x,M,k],styles:[".sidebar-brand-text[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700}.rotate-n-15[_ngcontent-%COMP%]{transform:rotate(-15deg)}.btn-user[_ngcontent-%COMP%]{font-size:1rem;padding:.75rem 1rem;border-radius:10rem}.d-lg-block[_ngcontent-%COMP%]{background:linear-gradient(to bottom right,#0f2027,#203a43,#2c5364)}.sidebar-brand-icon[_ngcontent-%COMP%]{color:#fff;font-size:8rem}.semi-div1[_ngcontent-%COMP%]{margin-top:22%;color:#fff;display:flex;padding:0 0 0 20px;justify-content:space-around}.semi1-petit2[_ngcontent-%COMP%]{display:flex;align-items:center;margin-left:0!important}"]})}}return o})();var R=T(I());var Z=()=>["/auth/login"];function $(){return o=>{let G=o.get("new_password")?.value,i=o.get("confirm_password")?.value;return G&&i&&G!==i?{passwordMismatch:!0}:null}}var W=(()=>{class o{constructor(i,e,a){this.router=i,this.http=e,this.route=a,this.is_loading=!1,this.reste_form=new S({temp_password:new u(null,f.required),new_password:new u(null,f.required),confirm_password:new u(null,f.required)},{validators:$()})}ngOnInit(){let i=JSON.parse(sessionStorage.getItem("email")||"null");i?(console.log("Email trouv\xE9 en session:",i),this.adminEmail=i):console.warn("Aucun email trouv\xE9 dans sessionStorage")}saveNewPassword(){if(this.reste_form.invalid){this.reste_form.markAllAsTouched(),R.default.fire({title:"Erreur",text:"Veuillez saisir deux mots de passe identiques",icon:"warning",confirmButtonText:"OK",confirmButtonColor:"#ff6c2f"});return}let i=this.reste_form?.value;i.email=this.adminEmail,this.http.SaveNewPassword(i).subscribe({next:e=>{console.log("Response:",e),e?.status==="success"?R.default.fire({title:"Succ\xE8s!",text:"Mot de passe r\xE9initialis\xE9 avec succ\xE8s!",icon:"success",confirmButtonText:"OK",confirmButtonColor:"#ff6c2f"}).then(()=>{this.router.navigate(["/auth/login"])}):(R.default.fire({title:"Error!",text:e?.message||"La r\xE9initialisation du Mot de passe a \xE9chou\xE9",icon:"error",confirmButtonText:"Essayer \xE0 nouveau",confirmButtonColor:"#ff6c2f"}),this.is_loading=!1)},error:e=>{console.log("Error:",e),R.default.fire({title:"Error!",text:e.error_description||"Une erreur est survenue",icon:"error",confirmButtonText:"R\xE9essayer",confirmButtonColor:"#ff6c2f"}),this.is_loading=!1},complete:()=>{console.log("Request complete"),this.is_loading=!1}})}static{this.\u0275fac=function(e){return new(e||o)(c(w),c(P),c(V))}}static{this.\u0275cmp=p({type:o,selectors:[["app-new-password"]],standalone:!0,features:[g],decls:35,vars:4,consts:[[1,"container","pt-5"],[1,"row","border","justify-content-center"],[1,"col-xl-10","col-lg-12","col-md-9"],[1,"card","o-hidden","border-0","shadow-lg","my-5"],[1,"card-body","p-0"],[1,"row"],[1,"col-lg-6","d-none","p-0","m-0","d-lg-block"],[1,"semi-div1"],[1,"sidebar-brand-icon","col-lg-4","semi1-petit1","rotate-n-15"],[1,"fas","fa-laugh-wink"],[1,"sidebar-brand-text","col-lg-8","p-0","semi1-petit2","mx-3"],[1,"col-lg-6"],[1,"p-5"],[1,"text-center"],[1,"h4","text-gray-900","mb-4"],[1,"mb-4"],[3,"submit","formGroup"],[1,"form-group","mb-3"],["type","text","formControlName","temp_password","placeholder","Enter Verification Code",1,"form-control"],["type","password","formControlName","new_password","placeholder","New Password",1,"form-control"],["type","password","formControlName","confirm_password","placeholder","Confirm New Password",1,"form-control"],[1,"btn","btn-primary","btn-user","btn-block",3,"disabled"],[1,"small",3,"routerLink"]],template:function(e,a){e&1&&(t(0,"div",0),n(1,"br"),t(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8),n(10,"i",9),r(),t(11,"div",10)(12,"h2")(13,"b"),s(14,"COOCLE SEARCH"),r()()()()(),t(15,"div",11)(16,"div",12)(17,"div",13)(18,"h1",14),s(19,"Reset Your Password"),r(),t(20,"p",15),s(21,"Enter the code sent to your email and choose a new password."),r()(),t(22,"form",16),v("submit",function(){return a.saveNewPassword()}),t(23,"div",17),n(24,"input",18),r(),t(25,"div",17),n(26,"input",19),r(),t(27,"div",17),n(28,"input",20),r(),t(29,"button",21),s(30,"Reset Password"),r()(),n(31,"hr"),t(32,"div",13)(33,"a",22),s(34,"Back to Login"),r()()()()()()()()()()),e&2&&(l(22),m("formGroup",a.reste_form),l(7),m("disabled",a.reste_form.invalid),l(4),m("routerLink",b(3,Z)))},dependencies:[d,C,h,N,E,_,y,x,M,k],styles:[".d-lg-block[_ngcontent-%COMP%]{background:linear-gradient(to bottom right,#0f2027,#203a43,#2c5364)}.sidebar-brand-icon[_ngcontent-%COMP%]{color:#fff;font-size:8rem}.semi-div1[_ngcontent-%COMP%]{margin-top:30%;color:#fff;display:flex;padding:0 0 0 20px;justify-content:space-around}.semi1-petit2[_ngcontent-%COMP%]{display:flex;align-items:center;margin-left:0!important}"]})}}return o})();var ee=[{path:"",component:z,children:[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:J},{path:"forgot-password",component:U},{path:"new-password",component:W}]}],Y=(()=>{class o{static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275mod=A({type:o})}static{this.\u0275inj=O({imports:[d.forChild(ee),d]})}}return o})();var xe=(()=>{class o{static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275mod=A({type:o})}static{this.\u0275inj=O({imports:[h,Y]})}}return o})();export{xe as AuthModule};
